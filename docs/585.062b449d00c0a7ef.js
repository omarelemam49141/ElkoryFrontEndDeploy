"use strict";(self.webpackChunkElkoryEcommerce=self.webpackChunkElkoryEcommerce||[]).push([[585],{4585:(dn,R,l)=>{l.r(R),l.d(R,{routes:()=>an});var t=l(8891);let Y=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-products-order"]],standalone:!0,features:[t.aNF],decls:2,vars:0,template:function(n,r){1&n&&(t.j41(0,"p"),t.EFF(1,"products-order works!"),t.k0s())}})}return o})();var a=l(4460),u=l(936),g=l(7196),h=l(3124),m=l(1445),A=l(9471),p=l(7544),b=l(4960),x=l(7839),w=l(2675),f=l(7859),V=l(345),q=l(7426);function J(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0629 \u0645\u0637\u0644\u0648\u0628"),t.k0s())}function W(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0629 \u064a\u062c\u0628 \u0627\u0646 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 \u062d\u0631\u0641\u0627\u0646"),t.k0s())}function z(o,s){if(1&o&&(t.j41(0,"mat-error"),t.DNE(1,J,2,0,"span",6)(2,W,2,0,"span",6),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.governerate||null==e.governerate.errors?null:e.governerate.errors.required),t.R7$(),t.Y8G("ngIf",null==e.governerate||null==e.governerate.errors?null:e.governerate.errors.min)}}function Q(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062f\u064a\u0646\u0629 \u0645\u0637\u0644\u0648\u0628"),t.k0s())}function H(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062f\u064a\u0646\u0629 \u064a\u062c\u0628 \u0627\u0646 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 \u062d\u0631\u0641\u0627\u0646"),t.k0s())}function Z(o,s){if(1&o&&(t.j41(0,"mat-error"),t.DNE(1,Q,2,0,"span",6)(2,H,2,0,"span",6),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.city||null==e.city.errors?null:e.city.errors.required),t.R7$(),t.Y8G("ngIf",null==e.city||null==e.city.errors?null:e.city.errors.min)}}function K(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0634\u0627\u0631\u0639 \u0645\u0637\u0644\u0648\u0628"),t.k0s())}function tt(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0633\u0645 \u0627\u0644\u0634\u0627\u0631\u0639 \u064a\u062c\u0628 \u0627\u0646 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 \u062d\u0631\u0641\u0627\u0646"),t.k0s())}function et(o,s){if(1&o&&(t.j41(0,"mat-error"),t.DNE(1,K,2,0,"span",6)(2,tt,2,0,"span",6),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.street||null==e.street.errors?null:e.street.errors.required),t.R7$(),t.Y8G("ngIf",null==e.street||null==e.street.errors?null:e.street.errors.min)}}function nt(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0628\u0631\u064a\u062f\u0649 \u0645\u0637\u0644\u0648\u0628"),t.k0s())}function ot(o,s){if(1&o&&(t.j41(0,"mat-error"),t.DNE(1,nt,2,0,"span",6),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.postalCode||null==e.postalCode.errors?null:e.postalCode.errors.required)}}function rt(o,s){if(1&o&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&o){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function it(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639 \u0645\u0637\u0644\u0648\u0628\u0629"),t.k0s())}function st(o,s){if(1&o&&(t.j41(0,"mat-error"),t.DNE(1,it,2,0,"span",6),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.paymentMethod||null==e.paymentMethod.errors?null:e.paymentMethod.errors.required)}}let D=(()=>{class o{constructor(e,n,r,i,c){this.data=e,this.dialogRef=n,this.fb=r,this.snackBar=i,this.genericService=c,this.paymentMethods=[{id:0,name:"\u0627\u0644\u062f\u0641\u0639 \u0639\u0646\u062f \u0627\u0644\u062a\u0633\u0644\u064a\u0645"},{id:1,name:"\u0627\u0644\u062f\u0641\u0639 \u0641\u0649 \u0627\u0644\u0641\u0631\u0639"},{id:2,name:"\u0627\u0644\u062f\u0641\u0639 \u0628\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}],this.notificationDurationInSeconds=5,this.subscriptions=[],this.orderForm=this.fb.group({governerate:["",[u.k0.required]],city:["",[u.k0.required]],street:["",[u.k0.required]],postalCode:["",[u.k0.required]],paymentMethod:["",[u.k0.required]]})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}submitForm(){let e=this.orderForm.value;e.userId=this.data.userId,e.offerId=this.data.offerId,this.subscriptions.push(this.genericService.insert("Order/ConfirmOrder",e).subscribe({next:()=>{this.dialogRef.close(!0)},error:n=>{console.log(n),this.snackBar.openFromComponent(g.A,{data:"\u062a\u0639\u0630\u0631 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0644\u0628. \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649",duration:1e3*this.notificationDurationInSeconds})}}))}onNoClick(){this.dialogRef.close()}get governerate(){return this.orderForm.get("governerate")}get city(){return this.orderForm.get("city")}get street(){return this.orderForm.get("street")}get postalCode(){return this.orderForm.get("postalCode")}get paymentMethod(){return this.orderForm.get("paymentMethod")}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(p.Vh),t.rXU(p.CP),t.rXU(u.ok),t.rXU(f.UG),t.rXU(V.X))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-send-order"]],standalone:!0,features:[t.aNF],decls:40,vars:8,consts:[["mat-dialog-title","",1,"dialog-title"],["maxWidth","90vw",1,"dialog-content"],[3,"formGroup"],[1,"form-group","mb-3"],["appearance","fill"],["matInput","","formControlName","governerate","type","text","placeholder","\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0629"],[4,"ngIf"],["matInput","","formControlName","city","type","text","placeholder","\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u062f\u064a\u0646\u0629"],["matInput","","formControlName","street","type","text","placeholder","\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0634\u0627\u0631\u0639"],["matInput","","formControlName","postalCode","type","text","placeholder","\u0627\u062f\u062e\u0644 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0628\u0631\u064a\u062f\u0649"],["formControlName","paymentMethod"],[3,"value",4,"ngFor","ngForOf"],[1,"dialog-actions"],["mat-button","",1,"btn","btn-secondary",3,"click"],["mat-button","",1,"btn","btn-success",3,"click","disabled"],[3,"value"]],template:function(n,r){1&n&&(t.j41(0,"h2",0),t.EFF(1,"\u0627\u0645\u0644\u0623 \u0628\u064a\u0627\u0646\u0627\u062a\u0643 \u0644\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0637\u0644\u0628"),t.k0s(),t.j41(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),t.EFF(7,"\u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0629"),t.k0s(),t.nrm(8,"input",5),t.DNE(9,z,3,2,"mat-error",6),t.k0s()(),t.j41(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),t.EFF(13,"\u0627\u0644\u0645\u062f\u064a\u0646\u0629"),t.k0s(),t.nrm(14,"input",7),t.DNE(15,Z,3,2,"mat-error",6),t.k0s()(),t.j41(16,"div",3)(17,"mat-form-field",4)(18,"mat-label"),t.EFF(19,"\u0627\u0644\u0634\u0627\u0631\u0639"),t.k0s(),t.nrm(20,"input",8),t.DNE(21,et,3,2,"mat-error",6),t.k0s()(),t.j41(22,"div",3)(23,"mat-form-field",4)(24,"mat-label"),t.EFF(25,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0628\u0631\u064a\u062f\u0649"),t.k0s(),t.nrm(26,"input",9),t.DNE(27,ot,2,1,"mat-error",6),t.k0s()(),t.j41(28,"div",3)(29,"mat-form-field",4)(30,"mat-label"),t.EFF(31,"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"),t.k0s(),t.j41(32,"mat-select",10),t.DNE(33,rt,2,2,"mat-option",11),t.k0s(),t.DNE(34,st,2,1,"mat-error",6),t.k0s()()()(),t.j41(35,"mat-dialog-actions",12)(36,"button",13),t.bIt("click",function(){return r.onNoClick()}),t.EFF(37,"\u0627\u0644\u063a\u0627\u0621"),t.k0s(),t.j41(38,"button",14),t.bIt("click",function(){return r.submitForm()}),t.EFF(39,"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0644\u0628"),t.k0s()()),2&n&&(t.R7$(3),t.Y8G("formGroup",r.orderForm),t.R7$(6),t.Y8G("ngIf",!(null!=r.governerate&&r.governerate.valid)&&(null==r.governerate?null:r.governerate.touched)),t.R7$(6),t.Y8G("ngIf",!(null!=r.city&&r.city.valid)&&(null==r.city?null:r.city.touched)),t.R7$(6),t.Y8G("ngIf",!(null!=r.street&&r.street.valid)&&(null==r.street?null:r.street.touched)),t.R7$(6),t.Y8G("ngIf",!(null!=r.postalCode&&r.postalCode.valid)&&(null==r.postalCode?null:r.postalCode.touched)),t.R7$(6),t.Y8G("ngForOf",r.paymentMethods),t.R7$(),t.Y8G("ngIf",!(null!=r.paymentMethod&&r.paymentMethod.valid)&&(null==r.paymentMethod?null:r.paymentMethod.touched)),t.R7$(4),t.Y8G("disabled",r.orderForm.invalid))},dependencies:[b.RG,b.rl,b.nJ,b.TL,x.fS,x.fg,w.Ve,w.VO,q.wT,u.YN,u.qT,u.me,u.BC,u.cb,A.Hl,A.$z,p.BI,p.Yi,p.E7,u.X1,u.j4,u.JD,a.MD,a.Sq,a.bT]})}return o})();var v=l(2042),_=l(3103);const ut=(o,s)=>s.productId;function ct(o,s){1&o&&(t.j41(0,"div",7)(1,"h5",8),t.EFF(2,"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0649 \u0627\u0644\u0639\u0631\u0628\u0629!"),t.k0s(),t.j41(3,"a",9),t.EFF(4,"\u0623\u0636\u0641 \u0628\u0639\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"),t.k0s()())}function at(o,s){if(1&o&&t.nrm(0,"img",23),2&o){const e=t.XpG().$implicit;t.Y8G("src",e.productImages[0].imageUri,t.B4B)}}function dt(o,s){1&o&&t.nrm(0,"img",24)}function lt(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",14)(1,"div",19)(2,"div",21)(3,"div",22),t.DNE(4,at,1,1,"img",23)(5,dt,1,0,"img",24),t.k0s(),t.j41(6,"div",25)(7,"p",26),t.EFF(8),t.k0s(),t.j41(9,"p")(10,"span",27),t.EFF(11,"\u0633\u0639\u0631 \u0627\u0644\u0645\u0646\u062a\u062c"),t.k0s(),t.j41(12,"span",28),t.EFF(13),t.nI1(14,"currency"),t.k0s()()(),t.j41(15,"div",29)(16,"input",30),t.bIt("click",function(){const r=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.updateProductAmountWithProuctId(r,r.amount-1))}),t.k0s(),t.j41(17,"input",31,0),t.bIt("keyup",function(){const r=t.eBV(e).$implicit,i=t.sdS(18),c=t.XpG(2);return t.Njj(c.updateProductAmountWithProuctId(r,+i.value))}),t.mxI("ngModelChange",function(r){const i=t.eBV(e).$implicit;return t.DH7(i.amount,r)||(i.amount=r),t.Njj(r)}),t.k0s(),t.j41(19,"input",32),t.bIt("click",function(){const r=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.updateProductAmountWithProuctId(r,r.amount+1))}),t.k0s()(),t.j41(20,"div",33)(21,"h6",34),t.EFF(22),t.nI1(23,"currency"),t.k0s()(),t.j41(24,"div",35)(25,"a",36),t.bIt("click",function(){const r=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.deleteProductFromCart(r.productId))}),t.nrm(26,"i",37),t.k0s()()()()()}if(2&o){const e=s.$implicit;t.R7$(4),t.vxM(e.productImages?4:5),t.R7$(4),t.JRh(e.name),t.R7$(5),t.JRh(t.i5U(14,8,e.finalPrice,"\u062c.\u0645")),t.R7$(3),t.Y8G("disabled",e.amount<=1),t.R7$(),t.FS9("max",e.allAmount),t.R50("ngModel",e.amount),t.R7$(2),t.Y8G("disabled",e.amount>=e.allAmount),t.R7$(3),t.JRh(t.i5U(23,11,(e.amount*e.finalPrice).toFixed(2),"\u062c.\u0645"))}}function pt(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",10)(1,"div",11)(2,"h5",12),t.EFF(3),t.k0s(),t.j41(4,"div")(5,"button",13),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.clearCart())}),t.EFF(6,"\u0627\u0632\u0627\u0644\u0629 \u0643\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"),t.k0s()()(),t.Z7z(7,lt,27,14,"div",14,ut),t.j41(9,"div",15)(10,"div",16)(11,"h5"),t.EFF(12,"\u0627\u062c\u0645\u0627\u0644\u0649 \u0627\u0644\u062a\u0643\u0644\u0641\u0629"),t.k0s(),t.j41(13,"h6",17),t.EFF(14),t.nI1(15,"currency"),t.k0s()()(),t.j41(16,"div",18)(17,"div",19)(18,"button",20),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.updateCart(!0))}),t.EFF(19,"\u0627\u0637\u0644\u0628 \u0627\u0644\u0627\u0646"),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(3),t.SpI("\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642 - \u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a : ",e.cart.productsAmounts.length,""),t.R7$(4),t.Dyx(e.cart.productsAmounts),t.R7$(7),t.JRh(t.i5U(15,2,e.cart.finalPrice,"\u062c.\u0645"))}}let mt=(()=>{class o{constructor(e,n,r,i,c){this.cartService=e,this.snackBar=n,this.accountService=r,this.router=i,this.dialog=c,this.cartChanged=!1,this.notificationDurationInSeconds=5,this.subscriptions=[],this.getCartObserver={next:d=>{d?.productsAmounts&&(localStorage.setItem("cart",JSON.stringify(d)),this.cart=d)},error:d=>{this.snackBar.openFromComponent(g.A,{data:"\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0639\u0631\u0628\u0629!",duration:1e3*this.notificationDurationInSeconds})}},this.deleteCartObserver={next:d=>{this.loadCart()},error:d=>{this.snackBar.openFromComponent(g.A,{data:"\u062a\u0639\u0630\u0631 \u062d\u0630\u0641 \u0627\u0644\u0639\u0631\u0628\u0629!",duration:1e3*this.notificationDurationInSeconds})}},this.updateCartObserver={next:d=>{this.snackBar.openFromComponent(h.s,{data:" \u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0631\u0628\u0629 \u0628\u0646\u062c\u0627\u062d!",duration:1e3*this.notificationDurationInSeconds})},error:d=>{this.snackBar.openFromComponent(g.A,{data:"\u062a\u0639\u0630\u0631 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0631\u0628\u0629!",duration:1e3*this.notificationDurationInSeconds})}}}ngOnInit(){this.loadCart()}loadCart(){if(localStorage.getItem("cart"))this.cart=JSON.parse(localStorage.getItem("cart"));else{let e=JSON.stringify(localStorage.getItem("token"));if(e){let n=this.accountService.getIdFromToken(e);this.subscriptions.push(this.cartService.displayCart(n).subscribe(this.getCartObserver))}else this.router.navigate(["/customer-account/login"])}}updateLocalStorageWithCart(){this.cartChanged=!0,this.changeCartItemsAmount(),localStorage.setItem("cart",JSON.stringify(this.cart))}changeCartItemsAmount(){this.cart.numberOfUniqueProducts=this.cart.productsAmounts.length,this.cart.numberOfProducts=0,this.cart.productsAmounts.forEach(e=>{this.cart.numberOfProducts+=e.amount}),this.changeCartNotificationNumber(this.cart.numberOfUniqueProducts)}changeCartNotificationNumber(e){this.cartService.changeNumberOfItemsInCart(e)}calculateCartFinalPrice(){this.cart.finalPrice=0;for(let e=0;e<this.cart.productsAmounts.length;e++)this.cart.finalPrice+=this.cart.productsAmounts[e].finalPrice*this.cart.productsAmounts[e].amount;this.updateLocalStorageWithCart()}validateSelectedPRoductAmount(e,n){let r=!1;return n<1?(e.amount=1,r=!0):n>e.allAmount&&(e.amount=e.allAmount,r=!0),r}decreaseOrIncreaseProductAmount(e,n){this.validateSelectedPRoductAmount(e,n)||(n>e.amount?(this.cart.numberOfProducts+=n-e.amount,this.cart.finalPrice+=e.finalPrice*(n-e.amount)):(this.cart.numberOfProducts-=e.amount-n,this.cart.finalPrice-=e.finalPrice*(e.amount-n)),e.amount=n,this.updateProductAmountInCart(e),this.calculateCartFinalPrice())}updateProductAmountInCart(e){let n=this.cart.productsAmounts.findIndex(r=>r.productId==e.productId);this.cart.productsAmounts.splice(n,1,e)}updateProductAmount(e,n){this.validateSelectedPRoductAmount(e,+n.target.value)||this.decreaseOrIncreaseProductAmount(e,+n.target.value)}updateProductAmountWithProuctId(e,n){this.validateSelectedPRoductAmount(e,n)||this.decreaseOrIncreaseProductAmount(e,n)}clearCart(){localStorage.removeItem("cart"),this.cart={},this.changeCartNotificationNumber(0);let e=localStorage.getItem("token");if(e){let n=this.accountService.getIdFromToken(e);this.subscriptions.push(this.cartService.deleteCart(n).subscribe(this.deleteCartObserver))}}updateCart(e=!1){e?this.cartService.updateCart(this.cart).subscribe({next:n=>{this.router.navigate(["/customer-products/confirm-order"])},error:n=>{console.log(n),this.snackBar.openFromComponent(g.A,{data:"\u062a\u0639\u0630\u0631 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0631\u0628\u0629!",duration:1e3*this.notificationDurationInSeconds})}}):this.cartService.updateCart(this.cart).subscribe(this.updateCartObserver)}deleteProductFromCart(e){let n=this.cart.productsAmounts.find(r=>r.productId==e);n&&(this.cart.productsAmounts=this.cart.productsAmounts.filter(r=>r.productId!=e),this.cart.numberOfUniqueProducts--,this.cart.numberOfProducts-=n.amount,this.cart.finalPrice-=n.finalPrice*n.amount,this.updateLocalStorageWithCart(),0==this.cart.productsAmounts.length?this.clearCart():this.cartService.updateCart(this.cart).subscribe(this.updateCartObserver))}openSendOrder(){this.dialog.open(D,{}).afterClosed().subscribe(n=>{n&&(this.clearCart(),this.snackBar.openFromComponent(h.s,{data:"\u062a\u0645 \u0627\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0644\u0628 \u0628\u0646\u062c\u0627\u062d!",duration:1e3*this.notificationDurationInSeconds}))})}ngOnDestroy(){this.cartChanged&&this.updateCart(),this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(v.m),t.rXU(f.UG),t.rXU(_.D),t.rXU(m.Ix),t.rXU(p.bZ))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-products-cart"]],standalone:!0,features:[t.aNF],decls:6,vars:2,consts:[["productAmount",""],[1,"h-100"],[1,"h-100","mt-5",2,"background-color","#eee"],[1,"container","h-100","py-5"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],["class","col-10 text-center",4,"ngIf"],["class","col-10",4,"ngIf"],[1,"col-10","text-center"],[1,"text-muted"],["routerLink","/customer-products",1,"btn","btn-primary","btn-lg","w-80","mt-3"],[1,"col-10"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-normal","mb-0","text-black"],[1,"btn","btn-danger",3,"click"],[1,"card","rounded-3","mb-4"],[1,"card","mb-4"],[1,"card-body","p-4","d-flex","justify-content-between","align-items-center"],[1,"fw-bold"],[1,"card"],[1,"card-body","p-4"],["type","button",1,"btn","btn-warning","btn-lg","w-100","text-uppercase","light","h4",3,"click"],[1,"row","d-flex","justify-content-between","align-items-center"],[1,"col-lg-2","col-xl-2","text-center"],[1,"img-fluid","rounded-3","image",3,"src"],["src","assets/images/no-image.png",1,"img-fluid","rounded-3","image"],[1,"col-lg-3","col-xl-3"],[1,"lead","fw-normal","mb-2"],[1,"text-muted","ms-1"],[1,"badge","text-bg-success"],[1,"amount","d-flex","col-lg-3","col-xl-2"],["type","button","value","-",1,"button-minus","btn","changing-amount",3,"click","disabled"],["type","number","inputmode","numeric","min","1",1,"form-control",3,"keyup","ngModelChange","max","ngModel"],["type","button","value","+",1,"button-plus","btn","changing-amount",3,"click","disabled"],[1,"col-lg-2","col-xl-2","offset-lg-1","mt-2","mt-lg-0"],[1,"mb-0","fw-bold"],[1,"col-lg-1","col-xl-1","text-end"],[1,"text-danger","fs-3",2,"cursor","pointer",3,"click"],[1,"fa","fa-trash"]],template:function(n,r){1&n&&(t.j41(0,"div",1)(1,"section",2)(2,"div",3)(3,"div",4),t.DNE(4,ct,5,0,"div",5)(5,pt,20,5,"div",6),t.k0s()()()()),2&n&&(t.R7$(4),t.Y8G("ngIf",!r.cart||!(null!=r.cart.productsAmounts&&r.cart.productsAmounts.length)),t.R7$(),t.Y8G("ngIf",null==r.cart||null==r.cart.productsAmounts?null:r.cart.productsAmounts.length))},dependencies:[a.MD,a.bT,a.oe,u.YN,u.me,u.Q0,u.BC,u.VZ,u.zX,u.vS,m.Wk]})}return o})();var O=l(1863),y=l(5183),M=l(7023);const gt=o=>[o,"EGP","symbol","1.2-2","ar-EG"];function ft(o,s){1&o&&(t.j41(0,"div")(1,"p",3),t.EFF(2,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0631\u063a\u0628\u0627\u062a \u0641\u0627\u0631\u063a\u0629"),t.k0s()())}function _t(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",14),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.addToCart(r))}),t.EFF(1," \u0625\u0636\u0627\u0641\u0629 \u0642\u0637\u0639\u0629 \u0648\u0627\u062d\u062f\u0629 \u0625\u0644\u0649 \u0633\u0644\u0629 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a "),t.k0s()}}function ht(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",13),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.removeFromCart(r))}),t.EFF(1," \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0633\u0644\u0629 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a "),t.k0s()}}function bt(o,s){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.nrm(2,"img",9),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"td")(11,"a",10),t.EFF(12," \u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c "),t.k0s()(),t.j41(13,"td"),t.DNE(14,_t,2,0,"button",11)(15,ht,2,0,"button",12),t.k0s(),t.j41(16,"td")(17,"button",13),t.bIt("click",function(){const r=t.eBV(e).$implicit,i=t.XpG(3);return t.Njj(i.removeFunc(r.productId))}),t.EFF(18," \u0625\u0632\u0627\u0644\u0629 \u0645\u0646 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0631\u063a\u0628\u0627\u062a "),t.k0s()()()}if(2&o){const e=s.$implicit,n=t.XpG(3);t.R7$(2),t.FS9("src",(null==e.productImages||null==e.productImages[0]?null:e.productImages[0].imageUri)||"",t.B4B),t.FS9("alt",e.name),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.description),t.R7$(2),t.JRh(t.iJd(9,9,t.eq3(15,gt,e.finalPrice))),t.R7$(3),t.Mz_("routerLink","/customer-products/product-details/",e.productId,""),t.R7$(3),t.Y8G("ngIf",!n.isProductInCart(e.productId)),t.R7$(),t.Y8G("ngIf",n.isProductInCart(e.productId))}}function Ct(o,s){if(1&o&&(t.j41(0,"table",4)(1,"thead",5)(2,"tr")(3,"th",6),t.EFF(4,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0646\u062a\u062c"),t.k0s(),t.j41(5,"th",6),t.EFF(6,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c"),t.k0s(),t.j41(7,"th",6),t.EFF(8,"\u0627\u0644\u0648\u0635\u0641"),t.k0s(),t.j41(9,"th",6),t.EFF(10,"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0646\u0647\u0627\u0626\u064a"),t.k0s(),t.j41(11,"th",7),t.EFF(12,"\u0627\u0644\u0639\u0645\u0644\u064a\u0627\u062a"),t.k0s()()(),t.j41(13,"tbody"),t.DNE(14,bt,19,17,"tr",8),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(14),t.Y8G("ngForOf",e.wishListProducts)}}function vt(o,s){if(1&o&&t.DNE(0,ft,3,0,"div",2)(1,Ct,15,1,"ng-template",null,0,t.C5r),2&o){const e=t.sdS(2),n=t.XpG();t.Y8G("ngIf",0===n.wishListProducts.length)("ngIfElse",e)}}function Ot(o,s){1&o&&t.nrm(0,"app-secondary-spinner")}let Pt=(()=>{class o{constructor(e,n,r,i,c){this.wishListService=e,this.accountService=n,this.snackBar=r,this.productService=i,this.cartService=c,this.wishListProducts=[],this.snackBarDurationInSeconds=5,this.isProductsLoading=!0}ngOnInit(){this.isProductsLoading=!0,this.userLoggedID=this.accountService.getTokenId(),this.userLoggedID&&this.loadWishList(this.userLoggedID)}loadWishList(e){this.wishListService.getWishList(e).subscribe(n=>{this.wishListProducts=n,this.isProductsLoading=!1},n=>{console.error("Error fetching wishlist:",n),this.isProductsLoading=!1})}removeFromWishList(e){this.wishListService.deleteWishListProduct(this.userLoggedID,e).subscribe(()=>{this.loadWishList(this.userLoggedID),this.wishListProducts=this.wishListProducts.filter(n=>n.productId!==e)},n=>{console.error("Error removing product from wishlist:",n)})}removeFunc(e){this.removeFromWishList(e)}addToCart(e){console.log(e);const n=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}'),r=n.productsAmounts.find(i=>i.productId===e.productId);if(r){if(this.isProductReachedMaxAmount(e))return void this.snackBar.open("\u062a\u0645 \u0628\u0644\u0648\u063a \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0645\u0646\u062a\u062c","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds});r.amount+=1,this.snackBar.open("\u062a\u0645 \u0623\u0636\u0627\u0641\u0629 \u0642\u0637\u0639\u0629 \u0627\u062e\u0631\u0649 \u0645\u0646 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649 \u0627\u0644\u0633\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds})}else n.productsAmounts.push({productId:e.productId,amount:1,allAmount:e.amount,categoryId:e.categoryId,categoryName:e.categoryName,description:e.description,discount:e.discount,finalPrice:e.finalPrice,name:e.name,originalPrice:e.originalPrice,productImages:e.productImages}),n.numberOfUniqueProducts+=1,this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649 \u0627\u0644\u0633\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds});n.finalPrice+=e.finalPrice,n.numberOfProducts+=1,this.cartService.changeNumberOfItemsInCart(n.numberOfUniqueProducts),localStorage.setItem("cart",JSON.stringify(n))}removeFromCart(e){const n=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}'),r=n.productsAmounts.findIndex(i=>i.productId===e.productId);if(-1!==r){const i=n.productsAmounts[r].amount;n.productsAmounts.splice(r,1),n.numberOfUniqueProducts-=1,n.numberOfProducts-=i,n.finalPrice-=e.finalPrice*i,localStorage.setItem("cart",JSON.stringify(n)),this.snackBar.open("\u062a\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0633\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds}),this.cartService.changeNumberOfItemsInCart(n.numberOfUniqueProducts)}}isProductReachedMaxAmount(e){const r=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}').productsAmounts.find(i=>i.productId===e.productId);return!!r&&r.amount>=e.amount}isProductInCart(e){console.log(e);const n=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}');return console.log(n),n.productsAmounts.some(r=>r.productId===e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(y.B),t.rXU(_.D),t.rXU(f.UG),t.rXU(M.b),t.rXU(v.m))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-products-wish-list"]],standalone:!0,features:[t.aNF],decls:3,vars:1,consts:[["wishListContent",""],[1,"wish-list-container"],[4,"ngIf","ngIfElse"],[1,"text-muted"],[1,"table","table-hover","table-bordered"],[1,"thead-dark"],["scope","col"],["scope","col","colspan","3",1,"text-center"],[4,"ngFor","ngForOf"],[1,"img-fluid","rounded",3,"src","alt"],[1,"btn","btn-outline-primary",3,"routerLink"],["class","btn btn-outline-success",3,"click",4,"ngIf"],["class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-outline-success",3,"click"]],template:function(n,r){1&n&&(t.j41(0,"div",1),t.DNE(1,vt,3,2)(2,Ot,1,0,"app-secondary-spinner"),t.k0s()),2&n&&(t.R7$(),t.vxM(r.isProductsLoading?2:1))},dependencies:[m.Wk,a.oe,a.MD,a.Sq,a.bT,O.l],styles:[".wish-list-container[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;border-radius:8px;box-shadow:0 4px 8px #0000001a}.text-muted[_ngcontent-%COMP%]{color:#6c757d;text-align:center;font-style:italic}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem;color:#212529}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:middle;border-top:1px solid #dee2e6}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #dee2e6;background-color:#343a40;color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border-top:2px solid #dee2e6}.table-bordered[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #dee2e6}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover}.btn[_ngcontent-%COMP%]{border-radius:20px;transition:all .3s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#007bff;color:#007bff}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.btn-outline-success[_ngcontent-%COMP%]{border-color:#28a745;color:#28a745}.btn-outline-success[_ngcontent-%COMP%]:hover{background-color:#28a745;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{border-color:#dc3545;color:#dc3545}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}"]})}return o})();var It=l(5594),E=l(9202),xt=l(3266),P=l(7151),kt=l(7691);let G=(()=>{class o{constructor(e){this.http=e}getProductReviews(e){return this.http.get(`${P.c.apiUrl}/review/${e}`)}getUserReviewAboutProduct(e,n){return this.http.get(`${P.c.apiUrl}/review?productId=${e}&customerId=${n}`)}deleteReview(e,n){return this.http.delete(`${P.c.apiUrl}/review?productId=${e}&customerId=${n}`)}addReview(e){return this.http.post(`${P.c.apiUrl}/review`,e)}updateReview(e){return this.http.put(`${P.c.apiUrl}/review`,e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.KVO(kt.Qq))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Ft=(()=>{class o{constructor(e,n){this.reviewService=e,this.accountService=n,this.productId=0,this.customerId=0,this.rate={productId:0,customerId:0,numOfStars:0,comment:"",rateDate:new Date},this.faStar=xt.yy,this.rating=0,this.rate.customerId=this.accountService.getTokenId()}ngOnInit(){this.rate.customerId=this.customerId,this.rate.productId=this.productId}addReview(){let e=this.getFinalDate();this.rate.rateDate=e,console.log(this.customerId),console.log(this.rate.customerId),console.log(this.rate),this.reviewService.addReview(this.rate).subscribe(n=>{console.log(n)})}setRating(e){this.rating=e,this.rate.numOfStars=e}getFinalDate(){const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(G),t.rXU(_.D))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-add-review"]],inputs:{productId:"productId",customerId:"customerId"},standalone:!0,features:[t.aNF],decls:19,vars:17,consts:[["dir","rtl"],[3,"ngSubmit"],["for","numOfStars"],[1,"star-rating"],[1,"stars"],[3,"click","icon"],["for","comment"],["id","comment","name","comment","placeholder","\u0639\u0628\u0631 \u0639\u0646 \u0631\u0623\u064a\u0643 \u0641\u064a \u0627\u0644\u0645\u0646\u062a\u062c",3,"ngModelChange","ngModel"],["type","hidden","id","rateDate","name","rateDate","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"\u0625\u0636\u0627\u0641\u0629 \u062a\u0642\u064a\u064a\u0645"),t.k0s(),t.j41(3,"form",1),t.bIt("ngSubmit",function(){return r.addReview()}),t.j41(4,"label",2),t.EFF(5,"\u0627\u0644\u062a\u0642\u064a\u064a\u0645:"),t.k0s(),t.j41(6,"div",3)(7,"div",4)(8,"fa-icon",5),t.bIt("click",function(){return r.setRating(5)}),t.k0s(),t.j41(9,"fa-icon",5),t.bIt("click",function(){return r.setRating(4)}),t.k0s(),t.j41(10,"fa-icon",5),t.bIt("click",function(){return r.setRating(3)}),t.k0s(),t.j41(11,"fa-icon",5),t.bIt("click",function(){return r.setRating(2)}),t.k0s(),t.j41(12,"fa-icon",5),t.bIt("click",function(){return r.setRating(1)}),t.k0s()()(),t.j41(13,"label",6),t.EFF(14,"\u0623\u0636\u0641 \u062a\u0639\u0644\u064a\u0642:"),t.k0s(),t.j41(15,"textarea",7),t.mxI("ngModelChange",function(c){return t.DH7(r.rate.comment,c)||(r.rate.comment=c),c}),t.k0s(),t.j41(16,"input",8),t.mxI("ngModelChange",function(c){return t.DH7(r.rate.rateDate,c)||(r.rate.rateDate=c),c}),t.k0s(),t.j41(17,"button",9),t.EFF(18,"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062a\u0642\u064a\u064a\u0645"),t.k0s()()()),2&n&&(t.R7$(8),t.AVh("rated",r.rating>=5),t.Y8G("icon",r.faStar),t.R7$(),t.AVh("rated",r.rating>=4),t.Y8G("icon",r.faStar),t.R7$(),t.AVh("rated",r.rating>=3),t.Y8G("icon",r.faStar),t.R7$(),t.AVh("rated",r.rating>=2),t.Y8G("icon",r.faStar),t.R7$(),t.AVh("rated",r.rating>=1),t.Y8G("icon",r.faStar),t.R7$(3),t.R50("ngModel",r.rate.comment),t.R7$(),t.R50("ngModel",r.rate.rateDate))},dependencies:[u.YN,u.qT,u.me,u.BC,u.cb,u.YS,u.vS,u.cV,a.MD,E.dX,E.aY],styles:["div[dir=rtl][_ngcontent-%COMP%]{text-align:right;margin:20px 0}label[_ngcontent-%COMP%]{display:block;margin-top:10px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;margin-top:5px}button[_ngcontent-%COMP%]{margin-top:15px;display:inline-block;background-color:#000;background-image:linear-gradient(125deg,#a72879,#064497);color:#fff;text-transform:uppercase;letter-spacing:2px;font-size:16px;padding:8px 16px;border:none;cursor:pointer}.star-rating[_ngcontent-%COMP%]{display:flex;align-items:baseline;margin-top:10px;gap:9px;font-size:24px}.stars[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}fa-icon[_ngcontent-%COMP%]{color:gray;cursor:pointer;transition:color .3s ease-in-out}fa-icon.rated[_ngcontent-%COMP%], fa-icon[_ngcontent-%COMP%]:hover, fa-icon[_ngcontent-%COMP%]:hover ~ fa-icon[_ngcontent-%COMP%]{color:gold}"]})}return o})();var yt=l(2759);function Mt(o,s){if(1&o&&(t.j41(0,"div",0)(1,"div",2),t.nrm(2,"i",3),t.j41(3,"h6"),t.EFF(4),t.k0s()(),t.j41(5,"div",4),t.nrm(6,"div",5),t.j41(7,"p"),t.EFF(8),t.k0s()()()),2&o){const e=s.$implicit,n=s.index,r=t.XpG(2);t.R7$(4),t.JRh(r.customrsNames[n]),t.R7$(2),t.Y8G("innerHTML",r.getStars(e.numOfStars),t.npT),t.R7$(2),t.JRh(e.comment)}}function St(o,s){if(1&o&&t.DNE(0,Mt,9,3,"div",1),2&o){const e=t.XpG();t.Y8G("ngForOf",e.reviewsList)}}function jt(o,s){1&o&&(t.j41(0,"p"),t.EFF(1,"\u0644\u0627 \u064a\u0648\u062c\u062f \u062a\u0642\u064a\u064a\u0645\u0627\u062a \u062d\u062a\u0649 \u0627\u0644\u0622\u0646"),t.k0s())}let Rt=(()=>{class o{constructor(e,n){this.reviewService=e,this.adminSevice=n,this.productId=0,this.reviewsList=[],this.customrsNames=[]}ngOnInit(){this.reviewService.getProductReviews(this.productId).subscribe(e=>{this.reviewsList=e;let n=[];this.adminSevice.GetAllUsers().subscribe(r=>{n=r;for(let i=0;i<this.reviewsList.length;i++){let c=r.find(d=>d.userId==this.reviewsList[i].customerId)?.fName;c&&this.customrsNames.push(c)}})},e=>{console.error("Error fetching Reviews",e)})}getStars(e){let n="";for(let r=0;r<5;r++)n+=r<e?'<i class="fa-solid fa-star fa-2x"></i>':'<i class="fa-regular fa-star fa-2x"></i>';return n}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(G),t.rXU(yt.z))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-get-review"]],inputs:{productId:"productId"},standalone:!0,features:[t.aNF],decls:4,vars:1,consts:[[1,"card"],["class","card",4,"ngFor","ngForOf"],[1,"user-info"],[1,"fa-solid","fa-user","fa-2x",2,"color","#B197FC"],[1,"review"],[1,"stars",2,"color","#FFD43B",3,"innerHTML"]],template:function(n,r){1&n&&(t.j41(0,"h2"),t.EFF(1," \u062a\u0639\u0644\u064a\u0642\u0627\u062a"),t.k0s(),t.DNE(2,St,1,1,"div",0)(3,jt,2,0,"p")),2&n&&(t.R7$(2),t.vxM(r.reviewsList.length>0?2:3))},dependencies:[a.MD,a.Sq,u.YN],styles:[".card[_ngcontent-%COMP%]{margin:20px 0;padding:10px}.user-info[_ngcontent-%COMP%]{display:flex;gap:10px}.review[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;gap:5px}"]})}return o})();var At=l(7650);function wt(o,s){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI("\u0645\u062f\u0629 \u0627\u0644\u0639\u0631\u0636 : ",e.duration," \u064a\u0648\u0645")}}function Dt(o,s){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI("\u0642\u064a\u0645\u0629 \u0627\u0644\u0639\u0631\u0636: ",e.packageDiscount," ")}}function Et(o,s){if(1&o&&(t.j41(0,"div",5)(1,"div",6),t.nrm(2,"img",7),t.j41(3,"div",8)(4,"a",9)(5,"h2"),t.EFF(6),t.k0s()(),t.j41(7,"span",10)(8,"p"),t.EFF(9),t.k0s(),t.j41(10,"p"),t.EFF(11),t.nI1(12,"date"),t.k0s(),t.DNE(13,wt,2,1,"p",3)(14,Dt,2,1,"p",3),t.k0s()()()()),2&o){const e=s.$implicit;t.R7$(2),t.FS9("alt",e.title),t.Y8G("src",e.image,t.B4B),t.R7$(2),t.Mz_("routerLink","/admin-offers/offer-details/",e.offerId,"/customer"),t.R7$(2),t.JRh(e.title),t.R7$(3),t.JRh(e.description),t.R7$(2),t.SpI("\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0639\u0631\u0636: ",t.bMT(12,9,e.offerDate),""),t.R7$(2),t.Y8G("ngIf",e.duration),t.R7$(),t.Y8G("ngIf",e.packageDiscount)}}function Gt(o,s){if(1&o&&(t.qex(0),t.DNE(1,Et,15,11,"div",4),t.bVm()),2&o){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.offers)}}function Tt(o,s){if(1&o&&(t.j41(0,"div",2),t.DNE(1,Gt,2,1,"ng-container",3),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.offers&&e.offers.length>0)}}function $t(o,s){1&o&&t.nrm(0,"app-secondary-spinner")}let Nt=(()=>{class o{constructor(e,n,r){this.offerService=e,this.snackBar=n,this.dialog=r,this.productId=0,this.subscriptions=[],this.notificationDurationInSeconds=5,this.isoffersLoading=!1,this.offerObserver={next:i=>{this.isoffersLoading=!1,this.offers=i.sort(()=>Math.random()-Math.random()).slice(0,2)},error:i=>{this.isoffersLoading=!1}}}getOffersByProductID(){this.subscriptions.push(this.offerService.getProductOffers(this.productId).subscribe(this.offerObserver))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}ngOnInit(){this.productId&&this.getOffersByProductID()}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(At.Y),t.rXU(f.UG),t.rXU(p.bZ))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-offers"]],inputs:{productId:"productId"},standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[["loading",""],["class","product-offers-container",4,"ngIf","ngIfElse"],[1,"product-offers-container"],[4,"ngIf"],["class","offer-card",4,"ngFor","ngForOf"],[1,"offer-card"],[1,"offer-image-container"],[1,"offer-image",3,"src","alt"],[1,"offer-text-overlay"],[3,"routerLink"],[1,"offerdetails"]],template:function(n,r){if(1&n&&t.DNE(0,Tt,2,1,"div",1)(1,$t,1,0,"ng-template",null,0,t.C5r),2&n){const i=t.sdS(2);t.Y8G("ngIf",!r.isoffersLoading)("ngIfElse",i)}},dependencies:[m.Wk,a.MD,a.Sq,a.bT,a.vh,O.l],styles:[".product-offers-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.offer-card[_ngcontent-%COMP%]{width:80%;max-width:400px;height:4.7rem;margin:16px 0;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden;display:flex;flex-direction:column;position:relative;transition:transform .2s;background-color:#fff}.offer-card[_ngcontent-%COMP%]:hover{height:15rem;transition:height .7s}.offer-image-container[_ngcontent-%COMP%]{position:relative;width:100%;height:300px;overflow:hidden}.offer-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.offer-text-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;background:#000000b3;color:#fff;width:100%;padding:16px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:center}.offerdetails[_ngcontent-%COMP%]:hover{display:inline}.offer-text-overlay[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.8em;color:#ffca28}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#ffca28}.offer-text-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:1.2em;color:#e0e0e0}.no-offers-message[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;font-size:1.5em;color:#757575;text-align:center}.offerdetails[_ngcontent-%COMP%]{display:none}.offerdetails[_ngcontent-%COMP%]{display:none;font-size:1.2em}.offer-card[_ngcontent-%COMP%]:hover   .offerdetails[_ngcontent-%COMP%]{display:block}"]})}return o})();var Xt=l(8736);const Bt=o=>["/categoryDetails",o],S=o=>[o,"EGP","symbol","1.2-2","ar-EG"],Lt=(o,s,e)=>["/customer-products/subcategoryproducts",o,s,e],Ut=o=>["/customer-products/product-details",o];function Yt(o,s){if(1&o&&(t.j41(0,"div",25)(1,"span",26),t.EFF(2),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI("",e.getDiscountPercentage(e.product.originalPrice,e.product.finalPrice),"% \u062e\u0635\u0645")}}function Vt(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",27),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.addProductToWishList({userId:r.userId,productId:r.product.productId}))}),t.nrm(1,"span",28),t.k0s()}}function qt(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",27),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.removeFromWishList({userId:r.userId,productId:r.product.productId}))}),t.nrm(1,"span",29),t.k0s()}}function Jt(o,s){if(1&o&&(t.qex(0,32),t.j41(1,"a",33),t.EFF(2),t.k0s(),t.bVm()),2&o){const e=s.$implicit,n=t.XpG().$implicit,r=t.XpG(2);t.R7$(),t.Y8G("routerLink",t.sMw(2,Lt,r.product.categoryId,n.subCategoryId,e.value)),t.R7$(),t.SpI(" ",e.value," ")}}function Wt(o,s){if(1&o&&(t.qex(0,30),t.DNE(1,Jt,3,6,"ng-container",31),t.bVm()),2&o){const e=s.$implicit;t.R7$(),t.Y8G("ngForOf",e.values)}}function zt(o,s){if(1&o&&(t.j41(0,"p")(1,"span",34),t.EFF(2),t.nI1(3,"currency"),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.JRh(t.iJd(3,1,t.eq3(7,S,e.product.originalPrice)))}}function Qt(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",35)(1,"button",36),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.decreaseQuantity())}),t.EFF(2,"-"),t.k0s(),t.j41(3,"input",37),t.mxI("ngModelChange",function(r){t.eBV(e);const i=t.XpG(2);return t.DH7(i.quantity,r)||(i.quantity=r),t.Njj(r)}),t.bIt("keyup",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.validateSelectedProductAmount())}),t.k0s(),t.j41(4,"button",38),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.increaseQuantity())}),t.EFF(5,"+"),t.k0s(),t.j41(6,"button",39),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.addToCart(r.product))}),t.EFF(7,"\u0623\u0636\u0641 \u0625\u0644\u0649 \u0627\u0644\u0633\u0644\u0629"),t.k0s()()}if(2&o){const e=t.XpG(2);t.R7$(3),t.R50("ngModel",e.quantity),t.R7$(3),t.Y8G("disabled",0==e.product.amount)}}function Ht(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",35)(1,"button",40),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.removeFromCart(r.product))}),t.EFF(2,"\u0625\u0632\u0627\u0644\u0629 \u0645\u0646 \u0627\u0644\u0633\u0644\u0629"),t.k0s()()}}function Zt(o,s){if(1&o&&t.nrm(0,"app-add-review",41),2&o){const e=t.XpG(2);t.Y8G("productId",e.product.productId)("customerId",e.userId)}}function Kt(o,s){if(1&o&&(t.j41(0,"div",42)(1,"div",43),t.nrm(2,"img",44),t.j41(3,"div",45)(4,"h5",46),t.EFF(5),t.k0s(),t.j41(6,"p",47),t.EFF(7),t.nI1(8,"currency"),t.k0s(),t.j41(9,"a",48),t.EFF(10,"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644"),t.k0s()()()()),2&o){const e=s.$implicit;t.R7$(2),t.FS9("src",(null==e.productImages||null==e.productImages[0]?null:e.productImages[0].imageUri)||"assets/images/no-image.png",t.B4B),t.FS9("alt",e.name),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(t.iJd(8,5,t.eq3(11,S,e.finalPrice))),t.R7$(2),t.Y8G("routerLink",t.eq3(13,Ut,e.productId))}}function te(o,s){if(1&o&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.DNE(4,Yt,3,1,"div",5),t.nrm(5,"img",6),t.DNE(6,Vt,2,0,"button",7)(7,qt,2,0,"button",7),t.k0s()(),t.j41(8,"div",8)(9,"h4"),t.EFF(10),t.k0s(),t.j41(11,"a",9)(12,"h6",10),t.EFF(13),t.k0s()(),t.DNE(14,Wt,2,1,"ng-container",11),t.j41(15,"p")(16,"span",12)(17,"strong"),t.EFF(18),t.nI1(19,"currency"),t.k0s()()(),t.DNE(20,zt,4,9,"p",13)(21,Qt,8,2,"div",14)(22,Ht,3,0,"div",14),t.k0s(),t.j41(23,"div",15),t.nrm(24,"app-product-offers",16),t.k0s()(),t.j41(25,"div",17)(26,"div",18)(27,"h3"),t.EFF(28,"\u0627\u0644\u0648\u0635\u0641"),t.k0s(),t.j41(29,"ul",19)(30,"li",20)(31,"span",21),t.EFF(32),t.k0s()()()()(),t.j41(33,"div",22),t.DNE(34,Zt,1,2,"app-add-review",23),t.nrm(35,"app-get-review",16),t.j41(36,"h3"),t.EFF(37,"\u0645\u0646\u062a\u062c\u0627\u062a \u0630\u0627\u062a \u0635\u0644\u0629"),t.k0s(),t.j41(38,"div",17),t.DNE(39,Kt,11,15,"div",24),t.k0s()()()),2&o){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.getDiscountPercentage(e.product.originalPrice,e.product.finalPrice)),t.R7$(),t.FS9("src",(null==e.product.productImages||null==e.product.productImages[0]?null:e.product.productImages[0].imageUri)||"assets/images/no-image.png",t.B4B),t.FS9("alt",e.product.name),t.R7$(),t.Y8G("ngIf",!e.isProductInWishlist(e.product.productId)&&e.userId),t.R7$(),t.Y8G("ngIf",e.isProductInWishlist(e.product.productId)&&e.userId),t.R7$(3),t.JRh(e.product.name),t.R7$(),t.Y8G("routerLink",t.eq3(24,Bt,e.product.categoryId)),t.R7$(2),t.JRh(e.product.categoryName),t.R7$(),t.Y8G("ngForOf",e.product.categoryValues),t.R7$(4),t.JRh(t.iJd(19,18,t.eq3(26,S,e.product.finalPrice))),t.R7$(2),t.Y8G("ngIf",e.product.originalPrice!==e.product.finalPrice),t.R7$(),t.Y8G("ngIf",!e.isProductInCart(e.product.productId)),t.R7$(),t.Y8G("ngIf",e.isProductInCart(e.product.productId)),t.R7$(2),t.Y8G("productId",e.product.productId),t.R7$(8),t.JRh(e.product.description),t.R7$(2),t.Y8G("ngIf",e.userId),t.R7$(),t.Y8G("productId",e.product.productId),t.R7$(4),t.Y8G("ngForOf",e.relatedProducts)}}let ee=(()=>{class o{constructor(e,n,r,i,c,d,F){this.route=e,this.productService=n,this.categoryService=r,this.snackBar=i,this.wishListService=c,this.accountService=d,this.cartService=F,this.relatedProducts=[],this.subscriptions=[],this.images=[],this.quantity=1,this.wishList=[],this.userId=-1,this.snackBarDurationInSeconds=5}ngOnInit(){this.route.paramMap.subscribe(e=>{const n=Number(e.get("id"));this.fetchProductDetails(n)}),this.userId=this.accountService.getTokenId(),this.userId&&this.fetchWishList(this.userId)}fetchProductDetails(e){const n=this.productService.getById(e).subscribe({next:r=>{this.product=r,this.productService.getPictures(r.productId).subscribe(i=>{this.image=i[0]}),this.fetchRelatedProducts()},error:r=>console.error("Error fetching product details:",r)});this.subscriptions.push(n)}fetchRelatedProducts(){if(this.product?.categoryId){const e=this.categoryService.getCategoryProducts(this.product.categoryId).subscribe({next:n=>{n=n.filter(r=>r.productId!==this.product?.productId),this.relatedProducts=this.getRandomSubset(n,4)},error:n=>console.error("Error fetching related products:",n)});this.subscriptions.push(e)}}getRandomSubset(e,n){return e.map(r=>({value:r,sort:Math.random()})).sort((r,i)=>r.sort-i.sort).map(({value:r})=>r).slice(0,n)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}increaseQuantity(){this.product&&this.quantity<this.product.amount?this.quantity++:this.snackBar.open("\u0644\u0627 \u064a\u0648\u062c\u062f \u0643\u0645\u064a\u0629 \u0643\u0627\u0641\u064a\u0629 \u0641\u064a \u0627\u0644\u0645\u062e\u0632\u0648\u0646","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds})}decreaseQuantity(){this.quantity>1&&this.quantity--}fetchWishList(e){this.wishListService.getWishList(e).subscribe(n=>{console.log("from success section"),console.log(n),this.wishList=n},n=>{console.log("error section"),console.log(n)})}addToCart(e){const n=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}'),r=n.productsAmounts.find(i=>i.productId===e.productId);console.log(`the product from cart is ${r?.amount}`),console.log(`the product from product list ${e.amount}`),r?(r.amount+=this.quantity,this.snackBar.open("\u062a\u0645 \u0623\u0636\u0627\u0641\u0629 \u0642\u0637\u0639\u0629 \u0627\u062e\u0631\u0649 \u0645\u0646 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649 \u0627\u0644\u0633\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds})):(n.productsAmounts.push({productId:e.productId,amount:this.quantity,categoryId:e.categoryId,categoryName:e.categoryName,description:e.description,discount:e.discount,finalPrice:e.finalPrice,name:e.name,originalPrice:e.originalPrice,productImages:e.productImages,allAmount:e.amount}),n.numberOfUniqueProducts+=1,this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649 \u0627\u0644\u0633\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds})),n.finalPrice+=e.finalPrice*this.quantity,n.numberOfProducts+=this.quantity,this.cartService.changeNumberOfItemsInCart(n.numberOfUniqueProducts),localStorage.setItem("cart",JSON.stringify(n))}removeFromCart(e){const n=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}'),r=n.productsAmounts.findIndex(i=>i.productId===e.productId);if(-1!==r){const i=n.productsAmounts[r].amount;n.productsAmounts.splice(r,1),n.numberOfUniqueProducts-=1,n.numberOfProducts-=i,n.finalPrice-=e.finalPrice*i,localStorage.setItem("cart",JSON.stringify(n)),this.snackBar.open("\u062a\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0633\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds}),this.cartService.changeNumberOfItemsInCart(n.numberOfUniqueProducts)}}addProductToWishList(e){this.wishListService.addWishListProduct(e).subscribe(()=>{console.log("from success section"),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 ","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds}),this.fetchWishList(this.userId)},n=>{console.log("error section"),console.log(n),this.snackBar.open("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649  \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds})})}isProductInWishlist(e){return!!this.wishList&&this.wishList.some(n=>n.productId===e)}removeFromWishList(e){this.wishListService.deleteWishListProduct(e.userId,e.productId).subscribe(()=>{this.fetchWishList(this.userId),this.snackBar.open("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds})},n=>{console.error("Error removing product from wishlist:",n),this.snackBar.open("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds})})}getDiscountPercentage(e,n){return Math.round((e-n)/e*100)}isProductInCart(e){return JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}').productsAmounts.some(r=>r.productId===e)}validateSelectedProductAmount(){void 0!==this.product&&void 0!==this.product.amount?void 0!==this.quantity?this.quantity<1?this.quantity=1:this.quantity>this.product.amount&&(this.quantity=this.product.amount):this.quantity=1:console.warn("Product or product amount is undefined")}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(m.nX),t.rXU(M.b),t.rXU(Xt.M),t.rXU(f.UG),t.rXU(y.B),t.rXU(_.D),t.rXU(v.m))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-details"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[["class","container product-details-container",4,"ngIf"],[1,"container","product-details-container"],[1,"row","product-main-details"],[1,"col-lg-4","product-image"],[1,"image-container","text-center","position-relative"],["class","position-absolute top-0 start-0 badge-container",4,"ngIf"],[1,"img-fluid","rounded-3","image",3,"src","alt"],["class","wishbutton",3,"click",4,"ngIf"],[1,"col-lg-4","product-info"],[3,"routerLink"],[1,"text-muted"],["class","d-flex flex-wrap gap-2",4,"ngFor","ngForOf"],[1,"price"],[4,"ngIf"],["class","d-flex align-items-center mb-3 quantity-section",4,"ngIf"],[1,"col-lg-4"],[3,"productId"],[1,"row"],[1,"col-12"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"text-end"],[1,"related-products"],[3,"productId","customerId",4,"ngIf"],["class","col-md-4 col-lg-3 d-flex",4,"ngFor","ngForOf"],[1,"position-absolute","top-0","start-0","badge-container"],[1,"badge","bg-success"],[1,"wishbutton",3,"click"],[1,"fa-regular","fa-heart"],[1,"fa-solid","fa-heart"],[1,"d-flex","flex-wrap","gap-2"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"d-inline-block"],[1,"category-link",3,"routerLink"],[1,"original-price"],[1,"d-flex","align-items-center","mb-3","quantity-section"],["type","button",1,"btn","btn-outline-secondary","quantity-button",2,"border-top-right-radius","20%","border-bottom-right-radius","20%",3,"click"],["type","number","min","1",1,"form-control","quantity-input","QuantityValue",3,"ngModelChange","keyup","ngModel"],["type","button",1,"btn","btn-outline-secondary","quantity-button",2,"border-top-left-radius","20%","border-bottom-left-radius","20%",3,"click"],[1,"btn","add-to-cart-button","ms-2",3,"click","disabled"],[1,"btn","btn-danger","ms-2",3,"click"],[3,"productId","customerId"],[1,"col-md-4","col-lg-3","d-flex"],[1,"product-card","card"],[1,"card-img-top","img-fluid","rounded-3",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary",3,"routerLink"]],template:function(n,r){1&n&&t.DNE(0,te,40,28,"div",0),2&n&&t.Y8G("ngIf",r.product)},dependencies:[m.Wk,a.MD,a.Sq,a.bT,a.oe,u.YN,u.me,u.Q0,u.BC,u.VZ,u.vS,Ft,Rt,Nt],styles:[".product-details-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;direction:rtl}.product-main-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;margin-bottom:40px}.product-image[_ngcontent-%COMP%]{flex:1;min-width:300px;max-width:500px}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:8px;object-fit:cover}.product-info[_ngcontent-%COMP%]{flex:2;display:flex;flex-direction:column;justify-content:center;gap:10px}.product-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:20px;margin-top:-10px}.product-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:20px;margin-top:-10px}.price[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px;color:#28a745}.original-price[_ngcontent-%COMP%]{font-size:1rem;text-decoration:line-through;color:#dc3545;margin-right:10px}.quantity-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.quantity-button[_ngcontent-%COMP%]{border:2px solid #ced4da;border-radius:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;background-color:#f8f9fa;font-size:22px}.quantity-button[_ngcontent-%COMP%]:hover{color:#b51cb0;font-weight:bolder;font-size:25px}.quantity-input[_ngcontent-%COMP%]{border:1px solid #ced4da;border-left:0;border-right:0;width:50px;border-radius:0;text-align:center;height:30px}.add-to-cart-button[_ngcontent-%COMP%]{border:1px solid #ced4da;background-color:#f8f9fa;color:#b51cb0;padding:5px 10px;cursor:pointer;text-transform:uppercase;font-weight:700;transition:background-color .3s;margin-left:5px;margin-right:15px;border-radius:8px}.add-to-cart-button[_ngcontent-%COMP%]:hover{color:#f8f9fa;background-image:linear-gradient(125deg,#a72879,#064497)}.related-products[_ngcontent-%COMP%]{margin-top:40px}.related-products[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.5rem}.product-card[_ngcontent-%COMP%]{margin-bottom:20px}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a;background-color:#fff;display:flex;flex-direction:column;text-align:center}.product-card[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:15px}.product-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.2rem;margin:10px 0}.product-card[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:1.2rem;color:#ff5722;font-weight:700}.product-card[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;border:none;padding:10px 20px;cursor:pointer;border-radius:4px;text-transform:uppercase;font-weight:700;transition:background-color .3s}.product-card[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#1565c0}.QuantityValue[_ngcontent-%COMP%]{width:50px;appearance:textfield;-webkit-appearance:textfield}.QuantityValue[_ngcontent-%COMP%]::-webkit-inner-spin-button, .QuantityValue[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.wishbutton[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background-color:#ffffffb3;border:none;padding:10px;border-radius:50%;cursor:pointer}.wishbutton[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:red;font-size:xx-large}.wishbutton[_ngcontent-%COMP%]:hover{color:#dc3545}.image-container[_ngcontent-%COMP%]{position:relative}.hover-text[_ngcontent-%COMP%]{display:none;background-color:#00000067;color:#fff;padding:5px;border-radius:3px;white-space:nowrap;font-size:small;margin-right:8px}.wishbutton[_ngcontent-%COMP%]:hover   .hover-text[_ngcontent-%COMP%]{display:inline;opacity:1;margin-left:5px;position:relative;left:5px}.product-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#8080806b;text-decoration:none}.product-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1d1c1c;text-decoration:underline}.d-flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.category-link[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:10px;text-decoration:none;color:#000}.category-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return o})();var ne=l(9671),j=l(8160),T=l(9966);const oe=()=>["/customer-products"];function re(o,s){1&o&&t.nrm(0,"app-secondary-spinner")}function ie(o,s){1&o&&(t.j41(0,"div",6)(1,"h5",7),t.EFF(2,"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0649 \u0627\u0644\u0639\u0631\u0628\u0629!"),t.k0s(),t.j41(3,"a",8),t.EFF(4,"\u0623\u0636\u0641 \u0628\u0639\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"),t.k0s()()),2&o&&(t.R7$(3),t.Y8G("routerLink",t.lJ4(1,oe)))}function se(o,s){if(1&o&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&o){const e=s.$implicit;t.FS9("value",e.offerId),t.R7$(),t.SpI(" ",e.title," ")}}function ue(o,s){1&o&&(t.j41(0,"span",28),t.EFF(1,"\u064a\u0631\u062c\u0649 \u062a\u062d\u062f\u064a\u062f \u0639\u0631\u0636"),t.k0s())}function ce(o,s){if(1&o&&t.nrm(0,"app-offer-details",29),2&o){const e=t.XpG(4);t.Y8G("offerId",e.selectedOfferId)("isCustomer",!0)}}function ae(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",19)(1,"label",20),t.EFF(2,"\u0627\u062e\u062a\u0631 \u0639\u0631\u0636 \u0644\u062a\u0637\u0628\u064a\u0642\u0647 \u0639\u0644\u0649 \u0637\u0644\u0628\u0643"),t.k0s(),t.j41(3,"select",21),t.mxI("ngModelChange",function(r){t.eBV(e);const i=t.XpG(3);return t.DH7(i.reviewOrderModel.offerId,r)||(i.reviewOrderModel.offerId=r),t.Njj(r)}),t.bIt("change",function(r){t.eBV(e);const i=t.XpG(3);return t.Njj(i.selectOffer(r))}),t.j41(4,"option",22),t.EFF(5,"\u0627\u062e\u062a\u0631 \u0639\u0631\u0636..."),t.k0s(),t.DNE(6,se,2,2,"option",23),t.k0s(),t.DNE(7,ue,2,0,"span",24),t.j41(8,"div",25),t.DNE(9,ce,1,2,"app-offer-details",26),t.k0s(),t.nrm(10,"hr"),t.k0s()}if(2&o){const e=t.XpG(3);t.R7$(3),t.R50("ngModel",e.reviewOrderModel.offerId),t.R7$(3),t.Y8G("ngForOf",e.reviewOrderModel.applicableOffers),t.R7$(),t.Y8G("ngIf",-1==e.reviewOrderModel.offerId),t.R7$(2),t.Y8G("ngIf",e.selectedOfferId&&-1!=e.selectedOfferId)}}function de(o,s){if(1&o&&t.nrm(0,"img",33),2&o){const e=t.XpG().$implicit;t.Y8G("src",e.productImages[0].imageUri,t.B4B)}}function le(o,s){1&o&&t.nrm(0,"img",34)}function pe(o,s){if(1&o&&(t.j41(0,"div",30)(1,"div",17)(2,"div",31)(3,"div",32),t.DNE(4,de,1,1,"img",33)(5,le,1,0,"img",34),t.k0s(),t.j41(6,"div",35)(7,"p",36),t.EFF(8),t.k0s(),t.j41(9,"p")(10,"span",37),t.EFF(11,"\u0633\u0639\u0631 \u0627\u0644\u0645\u0646\u062a\u062c"),t.k0s(),t.j41(12,"span",38),t.EFF(13),t.nI1(14,"currency"),t.k0s()()(),t.j41(15,"div",39),t.nrm(16,"input",40),t.k0s(),t.j41(17,"div",41)(18,"h6",42),t.EFF(19),t.nI1(20,"currency"),t.k0s()()()()()),2&o){const e=s.$implicit;t.R7$(4),t.vxM(e.productImages?4:5),t.R7$(4),t.JRh(e.name),t.R7$(5),t.SpI("",t.i5U(14,5,e.finalPrice,"EGP"),"\u062c.\u0645"),t.R7$(3),t.FS9("value",e.amount),t.R7$(3),t.JRh(t.i5U(20,8,(e.amount*e.finalPrice).toFixed(2),"\u062c.\u0645"))}}function me(o,s){if(1&o&&(t.j41(0,"div")(1,"h5"),t.EFF(2,"\u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0642\u0628\u0644 \u0627\u0644\u0639\u0631\u0636"),t.k0s(),t.j41(3,"h6",43),t.EFF(4),t.nI1(5,"currency"),t.k0s()(),t.j41(6,"div")(7,"h5"),t.EFF(8,"\u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0628\u0639\u062f \u0627\u0644\u0639\u0631\u0636"),t.k0s(),t.j41(9,"h6",44),t.EFF(10),t.nI1(11,"currency"),t.k0s()()),2&o){const e=t.XpG(3);t.R7$(4),t.JRh(t.i5U(5,2,e.reviewOrderModel.finalPrice,"\u062c.\u0645")),t.R7$(6),t.JRh(t.i5U(11,5,e.reviewOrderModel.finalPriceAfterOffer,"\u062c.\u0645"))}}function ge(o,s){if(1&o&&(t.j41(0,"h5"),t.EFF(1,"\u0627\u062c\u0645\u0627\u0644\u0649 \u0627\u0644\u062a\u0643\u0644\u0641\u0629"),t.k0s(),t.j41(2,"h6",44),t.EFF(3),t.nI1(4,"currency"),t.k0s()),2&o){const e=t.XpG(3);t.R7$(3),t.JRh(t.i5U(4,1,e.reviewOrderModel.finalPrice,"\u062c.\u0645"))}}function fe(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"h5",11),t.EFF(3),t.k0s()(),t.DNE(4,ae,11,4,"div",12)(5,pe,21,11,"div",13),t.j41(6,"div",14)(7,"div",15),t.DNE(8,me,12,8)(9,ge,5,4),t.k0s()(),t.j41(10,"div",16)(11,"div",17)(12,"button",18),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.confirmOrder())}),t.EFF(13,"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0637\u0644\u0628"),t.k0s()()()()}if(2&o){const e=t.XpG(2);t.R7$(3),t.SpI("\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0637\u0644\u0628 - \u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a : ",e.reviewOrderModel.productsAmounts.length,""),t.R7$(),t.Y8G("ngIf",null==e.reviewOrderModel.applicableOffers?null:e.reviewOrderModel.applicableOffers.length),t.R7$(),t.Y8G("ngForOf",e.reviewOrderModel.productsAmounts),t.R7$(3),t.vxM(e.reviewOrderModel.finalPriceAfterOffer?8:9),t.R7$(4),t.Y8G("disabled",-1==e.reviewOrderModel.offerId)}}function _e(o,s){if(1&o&&(t.j41(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3),t.DNE(4,ie,5,2,"div",4)(5,fe,14,5,"div",5),t.k0s()()()()),2&o){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.reviewOrderModel&&!(null!=e.reviewOrderModel.productsAmounts&&e.reviewOrderModel.productsAmounts.length)),t.R7$(),t.Y8G("ngIf",null==e.reviewOrderModel||null==e.reviewOrderModel.productsAmounts?null:e.reviewOrderModel.productsAmounts.length)}}let he=(()=>{class o{constructor(e,n,r,i,c,d,F){this.cartService=e,this.accountService=n,this.router=r,this.snackBar=i,this.dialog=c,this.orderService=d,this.adminNotificationsService=F,this.isOrderLoading=!1,this.notificationDurationInSeconds=5,this.reviewOrderObserver={next:C=>{this.isOrderLoading=!1,this.reviewOrderModel=C},error:C=>{this.isOrderLoading=!1,this.showNotification("\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0637\u0644\u0628. \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649",!1)}},this.getOfferModifiedPriceObserver={next:C=>{this.isOrderLoading=!1,this.reviewOrderModel.finalPriceAfterOffer=C.offerFinalPrice,this.reviewOrderModel.finalPrice=C.cartFinalPrice},error:C=>{this.isOrderLoading=!1,this.showNotification("\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0637\u0644\u0628. \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649",!1)}}}ngOnInit(){let e=this.getUserId();e?this.getUserOrderInfo(e):(this.showNotification("\u064a\u062c\u0628 \u0639\u0644\u064a\u0643 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0627\u0648\u0644\u0627",!1),this.router.navigate(["/customer-account/login"]))}getUserOrderInfo(e){this.isOrderLoading=!0,this.cartService.getOrderInfo(e).subscribe(this.reviewOrderObserver)}showNotification(e,n){this.snackBar.openFromComponent(n?h.s:g.A,{data:e,duration:1e3*this.notificationDurationInSeconds})}getUserId(){return this.accountService.getTokenId()}setSelectedOfferDetails(e){this.selectedOfferId=e,this.selectedOffer=this.reviewOrderModel.applicableOffers.find(n=>n.offerId==this.selectedOfferId)}getOrderModifiedPrice(e){this.isOrderLoading=!0,this.orderService.getOrderModifiedPrice(e,this.getUserId()).subscribe(this.getOfferModifiedPriceObserver)}selectOffer(e){this.setSelectedOfferDetails(e.target.value),this.getOrderModifiedPrice(e.target.value)}confirmOrder(){this.dialog.open(D,{data:{userId:this.getUserId(),offerId:this.selectedOfferId}}).afterClosed().subscribe(n=>{n&&(this.adminNotificationsService.getNumberOfPendingOrders(),this.showNotification("\u062a\u0645 \u062a\u0627\u0654\u0643\u064a\u062f \u0627\u0644\u0637\u0644\u0628 \u0628\u0646\u062c\u0627\u062d",!0),localStorage.removeItem("cart"),this.cartService.changeNumberOfItemsInCart(0),this.router.navigate(["/customer-products/customer-previous-orders/customer"]))})}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(v.m),t.rXU(_.D),t.rXU(m.Ix),t.rXU(f.UG),t.rXU(p.bZ),t.rXU(j.Q),t.rXU(T.V))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-confirm-order"]],standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[[1,"h-100"],[1,"h-100","mt-5",2,"background-color","#eee"],[1,"container","h-100","py-5"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],["class","col-10 text-center",4,"ngIf"],["class","col-10",4,"ngIf"],[1,"col-10","text-center"],[1,"text-muted"],[1,"btn","btn-primary","btn-lg","w-80","mt-3",3,"routerLink"],[1,"col-10"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-normal","mb-0","text-black"],["class","offer mb-4",4,"ngIf"],["class","card rounded-3 mb-4",4,"ngFor","ngForOf"],[1,"card","mb-4"],[1,"card-body","p-4","d-flex","justify-content-between","align-items-center"],[1,"card"],[1,"card-body","p-4"],["type","button",1,"btn","btn-warning","btn-lg","w-100","text-uppercase","light","h4",3,"click","disabled"],[1,"offer","mb-4"],[1,"form-label"],["aria-label","Default select example",1,"form-select",3,"ngModelChange","change","ngModel"],["value","-1","selected","true"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"offerDetails"],[3,"offerId","isCustomer",4,"ngIf"],[3,"value"],[1,"text-danger"],[3,"offerId","isCustomer"],[1,"card","rounded-3","mb-4"],[1,"row","d-flex","justify-content-between","align-items-center"],[1,"col-lg-2","col-xl-2","text-center"],[1,"img-fluid","rounded-3","image",3,"src"],["src","assets/images/no-image.png",1,"img-fluid","rounded-3","image"],[1,"col-lg-3","col-xl-3"],[1,"lead","fw-normal","mb-2"],[1,"text-muted","ms-1"],[1,"badge","text-bg-success"],[1,"amount","d-flex","col-lg-3","col-xl-2"],["type","number","inputmode","numeric","readonly","",1,"form-control",3,"value"],[1,"col-lg-3","col-xl-3","offset-lg-1","mt-2","mt-lg-0"],[1,"mb-0","fw-bold"],[1,"text-danger",2,"text-decoration","line-through"],[1,"fw-bold","text-success"]],template:function(n,r){1&n&&t.DNE(0,re,1,0,"app-secondary-spinner")(1,_e,6,2,"div",0),2&n&&t.vxM(r.isOrderLoading?0:1)},dependencies:[a.MD,a.Sq,a.bT,a.oe,m.Wk,u.YN,u.xH,u.y7,u.wz,u.BC,u.vS,ne.u,O.l],styles:[".offerDetails[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}"]})}return o})();var k=l(7186),be=l(8331);function Ce(o,s){if(1&o&&(t.j41(0,"h6",10),t.EFF(1),t.k0s(),t.j41(2,"h6",10),t.EFF(3),t.k0s(),t.j41(4,"h6",10),t.EFF(5),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(null==e.data.user?null:e.data.user.fullName),t.R7$(2),t.JRh(null==e.data.user?null:e.data.user.email),t.R7$(2),t.JRh(null==e.data.user?null:e.data.user.phone)}}function ve(o,s){if(1&o&&(t.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),t.nrm(4,"img",15),t.k0s(),t.j41(5,"div",16)(6,"p",17),t.EFF(7),t.k0s(),t.j41(8,"p")(9,"span",18),t.EFF(10,"Item Price: "),t.k0s(),t.j41(11,"span",19),t.EFF(12),t.nI1(13,"currency"),t.k0s()()(),t.j41(14,"div",20)(15,"p")(16,"span",18),t.EFF(17,"Item amount :"),t.k0s(),t.j41(18,"span",21),t.EFF(19),t.k0s()()(),t.j41(20,"div",22)(21,"h5",23),t.EFF(22),t.nI1(23,"currency"),t.k0s()()()()()),2&o){const e=s.$implicit;t.R7$(4),t.FS9("src",e.productImageUri,t.B4B),t.R7$(3),t.JRh(e.productName),t.R7$(5),t.JRh(t.i5U(13,5,e.productPrice,"\u062c.\u0645")),t.R7$(7),t.JRh(e.amount),t.R7$(3),t.JRh(t.i5U(23,8,e.amount*e.productPrice,"\u062c.\u0645"))}}function Oe(o,s){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"button",26),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.changeStatus("accepted"))}),t.EFF(2,"\u0642\u0628\u0648\u0644"),t.k0s(),t.j41(3,"button",27),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.changeStatus("cancelled"))}),t.EFF(4,"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0637\u0644\u0628"),t.k0s()()}}function Pe(o,s){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"\u0648\u0642\u062a \u0627\u0644\u0634\u062d\u0646 \u0628\u0627\u0644\u0623\u064a\u0627\u0645"),t.k0s(),t.j41(4,"input",28,0),t.bIt("keyup",function(){t.eBV(e);const r=t.sdS(5);return t.Njj(r.value=+r.value<1?"1":r.value)}),t.k0s()(),t.j41(6,"button",26),t.bIt("click",function(){t.eBV(e);const r=t.sdS(5),i=t.XpG(2);return t.Njj(i.changeStatus("shipped",r.value))}),t.EFF(7,"\u062a\u0648\u0635\u064a\u0644"),t.k0s(),t.j41(8,"button",27),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.changeStatus("cancelled"))}),t.EFF(9,"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0637\u0644\u0628"),t.k0s()()}}function Ie(o,s){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"button",26),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.changeStatus("delivered"))}),t.EFF(2,"\u062a\u0645 \u0627\u0644\u062a\u0633\u0644\u064a\u0645"),t.k0s(),t.j41(3,"button",27),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.changeStatus("cancelled"))}),t.EFF(4,"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0637\u0644\u0628"),t.k0s()()}}function xe(o,s){if(1&o&&(t.j41(0,"div")(1,"div",24),t.DNE(2,Oe,5,0,"div",25)(3,Pe,10,0,"div",25)(4,Ie,5,0,"div",25),t.k0s()()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngSwitch",e.data.status),t.R7$(),t.Y8G("ngSwitchCase",0),t.R7$(),t.Y8G("ngSwitchCase",1),t.R7$(),t.Y8G("ngSwitchCase",2)}}let ke=(()=>{class o{constructor(e,n,r,i,c,d){this.dialogRef=e,this.data=n,this.orderService=r,this.snackBar=i,this.accountService=c,this.adminNotificationsService=d,this.orderStatus=["pending","accepted","shipped","delivered","cancelled"],this.notificationDurationInSeconds=5,this.changeStatusObserver={next:()=>{this.showNotification("\u062a\u0645 \u062a\u063a\u064a\u064a\u0631 \u062d\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628 \u0628\u0646\u062c\u0627\u062d",!0),this.dialogRef.close(!0),this.adminNotificationsService.getNumberOfPendingOrders()},error:F=>{this.showNotification("\u062a\u0639\u0630\u0631 \u062a\u063a\u064a\u064a\u0631 \u062d\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628",!1)}}}showNotification(e,n){this.snackBar.openFromComponent(n?h.s:g.A,{data:e,duration:1e3*this.notificationDurationInSeconds})}changeStatus(e,n){n?this.orderService.changeOrderStatus(this.data.orderId,this.orderStatus.indexOf(e),+n).subscribe(this.changeStatusObserver):this.orderService.changeOrderStatus(this.data.orderId,this.orderStatus.indexOf(e)).subscribe(this.changeStatusObserver)}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(p.CP),t.rXU(p.Vh),t.rXU(j.Q),t.rXU(f.UG),t.rXU(_.D),t.rXU(T.V))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-customer-order-details"]],standalone:!0,features:[t.aNF],decls:17,vars:8,consts:[["shippingDurationInDays",""],["mat-dialog-title","",1,"dialog-title"],["maxWidth","90vw",1,"dialog-content"],["class","card rounded-3 mb-4 animate-card",4,"ngFor","ngForOf"],[1,"card","mb-4","animate-card"],[1,"card-body","p-4","d-flex","justify-content-between","flex-wrap"],[1,"fw-bold"],[1,"dialog-actions"],[4,"ngIf"],["mat-button","",1,"btn","btn-secondary",3,"click"],[1,"customer-name"],[1,"card","rounded-3","mb-4","animate-card"],[1,"card-body","p-4"],[1,"row","d-flex","justify-content-between","align-items-center"],[1,"col-lg-2","text-center"],["alt","image",1,"img-fluid","rounded-3","image",3,"src"],[1,"col-lg-4"],[1,"lead","fw-normal","mb-2"],[1,"text-muted"],[1,"badge","text-bg-success"],[1,"amount","d-flex","col-lg-3"],[1,"fw-bold","ms-1"],[1,"col-lg-2","offset-lg-1","mt-2","mt-lg-0"],[1,"mb-0","fw-bold"],[3,"ngSwitch"],[4,"ngSwitchCase"],["mat-button","",1,"btn","btn-success","ms-2",3,"click"],["mat-button","",1,"btn","btn-danger","ms-2",3,"click"],["matInput","","type","number","min","1",3,"keyup"]],template:function(n,r){1&n&&(t.j41(0,"h2",1)(1,"h5"),t.EFF(2),t.k0s(),t.DNE(3,Ce,6,3),t.k0s(),t.j41(4,"mat-dialog-content",2),t.DNE(5,ve,24,11,"div",3),t.j41(6,"div",4)(7,"div",5)(8,"h5"),t.EFF(9,"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u0649"),t.k0s(),t.j41(10,"h5",6),t.EFF(11),t.nI1(12,"currency"),t.k0s()()()(),t.j41(13,"mat-dialog-actions",7),t.DNE(14,xe,5,4,"div",8),t.j41(15,"button",9),t.bIt("click",function(){return r.onNoClick()}),t.EFF(16,"\u0625\u063a\u0644\u0627\u0642"),t.k0s()()),2&n&&(t.R7$(2),t.SpI("\u0637\u0644\u0628 \u0631\u0642\u0645 ",r.data.orderId,""),t.R7$(),t.vxM("admin"==r.accountService.getTokenRole().toLowerCase()?3:-1),t.R7$(2),t.Y8G("ngForOf",r.data.productOrders),t.R7$(6),t.JRh(t.i5U(12,5,r.data.totalPrice,"\u062c.\u0645")),t.R7$(3),t.Y8G("ngIf","admin"==r.accountService.getTokenRole().toLowerCase()))},dependencies:[p.BI,p.Yi,p.E7,x.fS,x.fg,b.rl,b.nJ,a.MD,a.Sq,a.bT,a.ux,a.e1,a.oe],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e0e0e0;padding-bottom:10px}.dialog-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .dialog-title[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0}.dialog-title[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-size:1rem;color:#555}.card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 4px 8px #0003}.animate-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease both}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;border-top:1px solid #e0e0e0;padding-top:10px;margin-top:10px}.dialog-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:10px}"]})}return o})();const I=o=>({active:o}),Fe=o=>({backgroundColor:o}),ye=()=>[10,15,25,50],$=(o,s)=>({"col-md-2":o,"col-md-4":s}),N=(o,s)=>({"col-md-1":o,"col-md-2":s}),X=(o,s)=>({"col-md-2":o,"col-md-3":s});function Me(o,s){if(1&o&&(t.j41(0,"span",9),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(null==e.ordersStats?null:e.ordersStats.totalPendingOrders)}}function Se(o,s){if(1&o&&(t.j41(0,"span",10),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(null==e.ordersStats?null:e.ordersStats.totalAcceptedOrders)}}function je(o,s){if(1&o&&(t.j41(0,"span",11),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(null==e.ordersStats?null:e.ordersStats.totalShippedOrders)}}function Re(o,s){if(1&o&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(null==e.ordersStats?null:e.ordersStats.totalDeliveredOrders)}}function Ae(o,s){if(1&o&&(t.j41(0,"span",13),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(null==e.ordersStats?null:e.ordersStats.totalCancelledOrders)}}function we(o,s){if(1&o&&(t.j41(0,"div",15)(1,"h5",17),t.EFF(2),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI("\u0644\u0627 \u064a\u0648\u062c\u062f \u0637\u0644\u0628\u0627\u062a ",e.ordersStatusesInArabic[e.ordersStatuses.indexOf(e.ordersType)]," \u0641\u0649 \u0627\u0644\u0648\u0642\u062a \u0627\u0644\u062d\u0627\u0644\u0649")}}function De(o,s){1&o&&(t.j41(0,"div",22),t.EFF(1,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0631\u062f"),t.k0s())}function Ee(o,s){1&o&&(t.j41(0,"div",22),t.EFF(1,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0648\u0635\u0648\u0644"),t.k0s())}function Ge(o,s){if(1&o&&(t.j41(0,"div",22),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.responseDate,"dd/MM/yyyy"))}}function Te(o,s){if(1&o&&(t.j41(0,"div",22),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.arrivalDate,"dd/MM/yyyy"))}}function $e(o,s){if(1&o){const e=t.RV6();t.j41(0,"li",25)(1,"div",26)(2,"div",21),t.EFF(3),t.k0s(),t.j41(4,"div",21),t.EFF(5),t.k0s(),t.j41(6,"div",21),t.EFF(7),t.nI1(8,"currency"),t.k0s(),t.j41(9,"div",22),t.EFF(10),t.k0s(),t.DNE(11,Ge,3,4,"div",22)(12,Te,3,4,"div",22),t.j41(13,"div",27),t.bIt("click",function(){const r=t.eBV(e).$implicit,i=t.XpG(3);return t.Njj(i.openOrderDetails(r))}),t.j41(14,"a",28),t.EFF(15,"\u062a\u0641\u0627\u0635\u064a\u0644"),t.k0s()()()()}if(2&o){const e=s.$implicit,n=t.XpG(3);t.R7$(2),t.Y8G("ngClass",t.l_i(12,$,n.previousOrders.items[0].status,!n.previousOrders.items[0].status)),t.R7$(),t.JRh(e.orderId),t.R7$(),t.Y8G("ngClass",t.l_i(15,N,n.previousOrders.items[0].status,!n.previousOrders.items[0].status)),t.R7$(),t.JRh(e.totalAmount),t.R7$(),t.Y8G("ngClass",t.l_i(18,X,n.previousOrders.items[0].status,!n.previousOrders.items[0].status)),t.R7$(),t.JRh(t.i5U(8,9,e.totalPrice,"\u062c.\u0645")),t.R7$(3),t.JRh(n.paymentMethods[e.paymentMethod]),t.R7$(),t.vxM(n.previousOrders.items[0].status?11:-1),t.R7$(),t.vxM(1==n.previousOrders.items[0].status||2==n.previousOrders.items[0].status?12:-1)}}function Ne(o,s){if(1&o&&(t.j41(0,"div")(1,"h2"),t.EFF(2),t.k0s(),t.j41(3,"ul",18)(4,"li",19)(5,"div",20)(6,"div",21),t.EFF(7,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628"),t.k0s(),t.j41(8,"div",21),t.EFF(9,"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"),t.k0s(),t.j41(10,"div",21),t.EFF(11,"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0646\u0647\u0627\u0626\u0649"),t.k0s(),t.j41(12,"div",22),t.EFF(13,"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"),t.k0s(),t.DNE(14,De,2,0,"div",22)(15,Ee,2,0,"div",22),t.j41(16,"div",23),t.EFF(17,"\u0627\u062c\u0631\u0627\u0621\u0627\u062a"),t.k0s()()(),t.DNE(18,$e,16,21,"li",24),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.JRh("\u0637\u0644\u0628\u0627\u062a "+e.ordersStatusesInArabic[e.ordersStatuses.indexOf(e.ordersType)]),t.R7$(4),t.Y8G("ngClass",t.l_i(7,$,e.previousOrders.items[0].status,!e.previousOrders.items[0].status)),t.R7$(2),t.Y8G("ngClass",t.l_i(10,N,e.previousOrders.items[0].status,!e.previousOrders.items[0].status)),t.R7$(2),t.Y8G("ngClass",t.l_i(13,X,e.previousOrders.items[0].status,!e.previousOrders.items[0].status)),t.R7$(4),t.vxM(e.previousOrders.items[0].status?14:-1),t.R7$(),t.vxM(1==e.previousOrders.items[0].status||2==e.previousOrders.items[0].status?15:-1),t.R7$(3),t.Y8G("ngForOf",e.previousOrders.items)}}function Xe(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",14),t.DNE(1,we,3,1,"div",15)(2,Ne,19,16,"div"),t.k0s(),t.j41(3,"div")(4,"mat-paginator",16),t.bIt("page",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.getPreviousOrders(r.ordersStatuses.indexOf(r.ordersType)))}),t.k0s()()}if(2&o){const e=t.XpG();t.Y8G("ngStyle",t.eq3(7,Fe,e.settingOrdersBacground())),t.R7$(),t.vxM(null!=e.previousOrders&&null!=e.previousOrders.items&&e.previousOrders.items.length?2:1),t.R7$(3),t.Y8G("length",e.totalPages)("pageSize",e.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",t.lJ4(9,ye))("pageIndex",e.pageNumber-1)}}function Be(o,s){1&o&&t.nrm(0,"app-secondary-spinner")}let B=(()=>{class o{constructor(e,n,r,i,c){this.orderService=e,this.snackBar=n,this.accountService=r,this.activatedRoute=i,this.dialog=c,this.role="customer",this.pageSize=10,this.pageNumber=1,this.totalPages=0,this.ordersType="pending",this.ordersStatuses=["pending","accepted","shipped","delivered","cancelled"],this.ordersStatusesInArabic=["\u0645\u0639\u0644\u0642\u0629","\u0645\u0642\u0628\u0648\u0644\u0629","\u0645\u0634\u062d\u0648\u0646\u0629","\u062a\u0645 \u062a\u0633\u0644\u064a\u0645\u0647\u0627","\u0645\u0644\u063a\u064a\u0629"],this.previousOrders={},this.paymentMethods=["\u0643\u0627\u0634 \u0639\u0646\u062f \u0627\u0644\u062a\u0633\u0644\u064a\u0645","\u0627\u0644\u062f\u0641\u0639 \u0641\u0649 \u0627\u0644\u0641\u0631\u0639","\u0627\u0644\u062f\u0641\u0639 \u0628\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"],this.isOrdersLoading=!1,this.notificationDurationInSeconds=5,this.getPreviousOrdersObserver={next:d=>{this.isOrdersLoading=!1,this.previousOrders=d,this.pageSize=d.pageSize,this.pageNumber=d.pageNumber,this.totalPages=d.totalPages},error:d=>{this.isOrdersLoading=!1,this.showNotification("\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0637\u0644\u0628\u0627\u062a",!1),this.resetOrdersStatus()}},this.getOrderStatsObserver={next:d=>{this.ordersStats=d},error:d=>{this.showNotification("\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u062d\u0635\u0627\u0621\u0627\u062a \u0627\u0644\u0637\u0644\u0628\u0627\u062a",!1)}}}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{this.role=e.get("role")?.toString().toLowerCase()||"customer",this.getPreviousOrders(0,e.get("role")?.toString().toLowerCase()||"customer")})}resetOrdersStatus(){this.previousOrders={},this.pageNumber=1,this.pageSize=10,this.totalPages=0}showNotification(e,n){this.snackBar.openFromComponent(n?h.s:g.A,{data:e,duration:1e3*this.notificationDurationInSeconds})}getPreviousOrders(e,n="customer"){if(this.ordersType=this.ordersStatuses[e],"customer"==n){let r=this.accountService.getTokenId();this.getPreviousOrdersByOrdersType(r,e),this.getOrderStats(r)}else this.getPreviousOrdersByOrdersType(e),this.getOrderStats()}getPreviousOrdersByOrdersType(e,n){this.isOrdersLoading=!0,n?this.orderService.getCustomerPreviousOrders(n,e,this.pageNumber,this.pageSize).subscribe(this.getPreviousOrdersObserver):this.orderService.getAllCustomersOrdersPaginated(e,this.pageNumber,this.pageSize).subscribe(this.getPreviousOrdersObserver)}getOrderStats(e){e?this.orderService.getUserOrdersStats(e).subscribe(this.getOrderStatsObserver):this.orderService.getAllOrdersStats().subscribe(this.getOrderStatsObserver)}settingOrdersBacground(){return"pending"==this.ordersType?"#b6cee7":"shipped"==this.ordersType?"#b6e3e7":"delivered"==this.ordersType?"#b6cee7":"cancelled"==this.ordersType?"#e7b6b6":"#b6cee7"}openOrderDetails(e){this.dialog.open(ke,{data:e}).afterClosed().subscribe(r=>{r&&this.getPreviousOrders(0,"admin")})}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(j.Q),t.rXU(f.UG),t.rXU(_.D),t.rXU(m.nX),t.rXU(p.bZ))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-customer-previous-orders"]],standalone:!0,features:[t.Jv_([{provide:k.xX,useClass:be.H}]),t.aNF],decls:23,vars:26,consts:[[1,"orders-listing","list-unstyled","d-flex","mt-4","mb-0","ps-0"],[1,"pending",3,"click","ngClass","disabled"],["class","badge badge-pending",4,"ngIf"],[1,"accepted",3,"click","ngClass","disabled"],["class","badge badge-accepted",4,"ngIf"],["class","badge badge-shipped",4,"ngIf"],[1,"refused",3,"click","ngClass","disabled"],["class","badge badge-delivered",4,"ngIf"],["class","badge badge-cancelled",4,"ngIf"],[1,"badge","badge-pending"],[1,"badge","badge-accepted"],[1,"badge","badge-shipped"],[1,"badge","badge-delivered"],[1,"badge","badge-cancelled"],[1,"orders",3,"ngStyle"],[1,"col-10","text-center","mt-5","mb-5","m-auto"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],[1,"text-muted","p-3"],[1,"responsive-table"],[1,"table-header","fw-bold"],[1,"row"],[3,"ngClass"],[1,"col-md-2"],["data-label","Details",1,"col-md-1"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"row","align-items-center"],["data-label","Details",1,"col-md-1",3,"click"],[1,"btn","btn-primary"]],template:function(n,r){1&n&&(t.j41(0,"ul",0)(1,"li")(2,"button",1),t.bIt("click",function(){return r.getPreviousOrders(0,r.role)}),t.EFF(3," \u0637\u0644\u0628\u0627\u062a \u0645\u0639\u0644\u0642\u0629 "),t.DNE(4,Me,2,1,"span",2),t.k0s()(),t.j41(5,"li")(6,"button",3),t.bIt("click",function(){return r.getPreviousOrders(1,r.role)}),t.EFF(7," \u0637\u0644\u0628\u0627\u062a \u0645\u0642\u0628\u0648\u0644\u0629 "),t.DNE(8,Se,2,1,"span",4),t.k0s()(),t.j41(9,"li")(10,"button",3),t.bIt("click",function(){return r.getPreviousOrders(2,r.role)}),t.EFF(11," \u062a\u0645 \u0627\u0644\u0634\u062d\u0646 "),t.DNE(12,je,2,1,"span",5),t.k0s()(),t.j41(13,"li")(14,"button",6),t.bIt("click",function(){return r.getPreviousOrders(3,r.role)}),t.EFF(15," \u062a\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644 "),t.DNE(16,Re,2,1,"span",7),t.k0s()(),t.j41(17,"li")(18,"button",6),t.bIt("click",function(){return r.getPreviousOrders(4,r.role)}),t.EFF(19," \u062a\u0645 \u0627\u0644\u0627\u0644\u063a\u0627\u0621 "),t.DNE(20,Ae,2,1,"span",8),t.k0s()()(),t.DNE(21,Xe,5,10)(22,Be,1,0,"app-secondary-spinner")),2&n&&(t.R7$(2),t.Y8G("ngClass",t.eq3(16,I,"pending"==r.ordersType))("disabled","pending"==r.ordersType),t.R7$(2),t.Y8G("ngIf",null==r.ordersStats?null:r.ordersStats.totalPendingOrders),t.R7$(2),t.Y8G("ngClass",t.eq3(18,I,"accepted"==r.ordersType))("disabled","accepted"==r.ordersType),t.R7$(2),t.Y8G("ngIf",null==r.ordersStats?null:r.ordersStats.totalAcceptedOrders),t.R7$(2),t.Y8G("ngClass",t.eq3(20,I,"shipped"==r.ordersType))("disabled","shipped"==r.ordersType),t.R7$(2),t.Y8G("ngIf",null==r.ordersStats?null:r.ordersStats.totalShippedOrders),t.R7$(2),t.Y8G("ngClass",t.eq3(22,I,"delivered"==r.ordersType))("disabled","delivered"==r.ordersType),t.R7$(2),t.Y8G("ngIf",null==r.ordersStats?null:r.ordersStats.totalDeliveredOrders),t.R7$(2),t.Y8G("ngClass",t.eq3(24,I,"cancelled"==r.ordersType))("disabled","cancelled"==r.ordersType),t.R7$(2),t.Y8G("ngIf",null==r.ordersStats?null:r.ordersStats.totalCancelledOrders),t.R7$(),t.vxM(r.isOrdersLoading?22:21))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.B3,a.oe,a.vh,k.iy,O.l],styles:["@media (max-width: 991px){.image[_ngcontent-%COMP%]{max-height:300px}}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#eee;padding:10px 15px;cursor:pointer;transition:all .3s ease;font-size:18px;border:none;color:#000}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.pending[_ngcontent-%COMP%]:hover{background-color:#b6cee7}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.accepted[_ngcontent-%COMP%]:hover{background-color:#b6e3e7}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.refused[_ngcontent-%COMP%]:hover{background-color:#e7b6b6}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover{background-color:#eee;cursor:auto}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:#ddd}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#fff;cursor:auto}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.pending.active[_ngcontent-%COMP%]{background-color:#b6cee7}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.accepted.active[_ngcontent-%COMP%]{background-color:#b6e3e7}.orders-listing[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.refused.active[_ngcontent-%COMP%]{background-color:#e7b6b6}.orders[_ngcontent-%COMP%]{background-color:#b6cee7}.orders[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}h2[_ngcontent-%COMP%]{font-size:26px;margin:20px 0;text-align:center}h2[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.5em}.responsive-table[_ngcontent-%COMP%]{padding-left:0;list-style-type:none}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-radius:3px;padding:25px 30px;justify-content:space-between;margin-bottom:25px}.responsive-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{color:#fff;background-color:#95a5a6;font-size:14px;text-transform:uppercase;letter-spacing:.03em}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 9px #0000001a}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .showIcon[_ngcontent-%COMP%]{color:#95a5a6;transition:all .3s;width:-moz-fit-content;width:fit-content;margin:auto}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .showIcon[_ngcontent-%COMP%]:hover{color:#0d6efd}.responsive-table[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .actionBtn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:auto}@media all and (max-width: 767px){.responsive-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:none}.responsive-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px 30px 10px 0;text-align:center}.responsive-table[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]:before{position:relative;color:#6c7a89;content:attr(data-label);flex-basis:50%}}.badge[_ngcontent-%COMP%]{display:inline-block;min-width:20px;padding:5px;border-radius:50%;background-color:red;color:#fff;text-align:center;font-size:12px;line-height:1;vertical-align:middle;margin-left:5px}.badge-pending[_ngcontent-%COMP%]{background-color:orange}.badge-accepted[_ngcontent-%COMP%]{background-color:purple}.badge-shipped[_ngcontent-%COMP%]{background-color:#00f}.badge-delivered[_ngcontent-%COMP%]{background-color:green}.badge-cancelled[_ngcontent-%COMP%]{background-color:gray}"]})}return o})();const Le=()=>[12,16,20,24],L=o=>[o,"EGP","symbol","1.2-2","ar-EG"];function Ue(o,s){if(1&o&&(t.j41(0,"div",42)(1,"span",43),t.EFF(2),t.k0s()()),2&o){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(2),t.SpI("",n.getDiscountPercentage(e.originalPrice,e.finalPrice),"% \u062e\u0635\u0645")}}function Ye(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.addProductToWishList({userId:i.userLoggedID,productId:r.productId}))}),t.nrm(1,"span",45),t.k0s()}}function Ve(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",46),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.removeFromWishList({UserId:i.userLoggedID,ProductId:r.productId}))}),t.nrm(1,"span",47),t.k0s()}}function qe(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){t.eBV(e);const r=t.XpG(),i=r.$implicit,c=r.index,d=t.XpG(3);return t.Njj(d.addToCart(i,c))}),t.nrm(1,"i",49),t.k0s()}}function Je(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){t.eBV(e);const r=t.XpG(),i=r.$implicit,c=r.index,d=t.XpG(3);return t.Njj(d.addToCart(i,c))}),t.nrm(1,"i",49),t.k0s()}}function We(o,s){1&o&&(t.j41(0,"button",51),t.nrm(1,"i",49),t.k0s())}function ze(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.removeFromCart(r))}),t.nrm(1,"i",53),t.k0s()}}function Qe(o,s){1&o&&(t.j41(0,"span",54),t.EFF(1,"\u0645\u062a\u0648\u0641\u0631"),t.k0s())}function He(o,s){1&o&&(t.j41(0,"span",55),t.EFF(1," \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"),t.k0s())}function Ze(o,s){if(1&o&&(t.j41(0,"p")(1,"span",56),t.EFF(2),t.nI1(3,"currency"),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(2),t.JRh(t.iJd(3,1,t.eq3(7,L,e.originalPrice)))}}function Ke(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",57)(1,"span",58)(2,"button",59),t.bIt("click",function(){t.eBV(e);const r=t.XpG().index,i=t.XpG(3);return t.Njj(i.decreaseQuantity(r))}),t.EFF(3,"-"),t.k0s(),t.j41(4,"input",60),t.mxI("ngModelChange",function(r){t.eBV(e);const i=t.XpG().index,c=t.XpG(3);return t.DH7(c.quantity[i],r)||(c.quantity[i]=r),t.Njj(r)}),t.bIt("keyup",function(){t.eBV(e);const r=t.XpG().index,i=t.XpG(3);return t.Njj(i.validateSelectedProductAmount(r))}),t.k0s(),t.j41(5,"button",61),t.bIt("click",function(){t.eBV(e);const r=t.XpG().index,i=t.XpG(3);return t.Njj(i.increaseQuantity(r))}),t.EFF(6,"+"),t.k0s()(),t.j41(7,"button",62),t.bIt("click",function(){t.eBV(e);const r=t.XpG(),i=r.$implicit,c=r.index,d=t.XpG(3);return t.Njj(d.addToCart(i,c))}),t.EFF(8,"\u0625\u0636\u0627\u0641\u0629 \u0644\u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642"),t.k0s()()}if(2&o){const e=t.XpG(),n=e.$implicit,r=e.index,i=t.XpG(3);t.R7$(4),t.R50("ngModel",i.quantity[r]),t.R7$(3),t.Y8G("disabled",n.amount<1)}}function tn(o,s){1&o&&t.nrm(0,"div",63)}function en(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",64),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.removeFromCart(r))}),t.EFF(1,"\u0625\u0632\u0627\u0644\u0629 \u0645\u0646 \u0627\u0644\u0633\u0644\u0629"),t.k0s()}}function nn(o,s){if(1&o&&(t.j41(0,"span",65),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI("\u0627\u0644\u0643\u0645\u064a\u0629: ",e.amount,"")}}function on(o,s){if(1&o&&(t.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),t.nrm(4,"img",20),t.DNE(5,Ue,3,1,"div",21)(6,Ye,2,0,"button",22)(7,Ve,2,0,"button",23)(8,qe,2,0,"button",24)(9,Je,2,0,"button",25)(10,We,2,0,"button",26)(11,ze,2,0,"button",27),t.k0s(),t.j41(12,"div",28),t.DNE(13,Qe,2,0,"span",29)(14,He,2,0,"span",30),t.j41(15,"span",31),t.EFF(16),t.k0s()(),t.j41(17,"div",32)(18,"h5",33),t.EFF(19),t.k0s(),t.j41(20,"p")(21,"span",34)(22,"strong"),t.EFF(23),t.nI1(24,"currency"),t.k0s()()(),t.DNE(25,Ze,4,9,"p",35),t.k0s(),t.DNE(26,Ke,9,2,"div",36)(27,tn,1,0,"div",37),t.j41(28,"div",38),t.DNE(29,en,2,0,"button",39),t.k0s(),t.j41(30,"a",40),t.EFF(31,"\u062a\u0641\u0627\u0635\u064a\u0644"),t.k0s()(),t.j41(32,"div",28),t.DNE(33,nn,2,1,"span",41),t.k0s()()()),2&o){const e=s.$implicit,n=t.XpG(3);t.R7$(4),t.FS9("src",(null==e.productImages||null==e.productImages[0]?null:e.productImages[0].imageUri)||"assets/images/no-image.png",t.B4B),t.FS9("alt",e.name),t.R7$(),t.Y8G("ngIf",n.getDiscountPercentage(e.originalPrice,e.finalPrice)),t.R7$(),t.Y8G("ngIf",!n.isProductInWishlist(e.productId)),t.R7$(),t.Y8G("ngIf",n.isProductInWishlist(e.productId)),t.R7$(),t.Y8G("ngIf",!n.isProductInCart(e.productId)),t.R7$(),t.Y8G("ngIf",n.isProductInCart(e.productId)&&!n.isProductReachedMaxAmount(e)),t.R7$(),t.Y8G("ngIf",n.isProductInCart(e.productId)),t.R7$(),t.Y8G("ngIf",n.isProductInCart(e.productId)),t.R7$(2),t.Y8G("ngIf",e.amount>0),t.R7$(),t.Y8G("ngIf",e.amount<=0),t.R7$(2),t.JRh(e.categoryName),t.R7$(3),t.JRh(e.name),t.R7$(4),t.JRh(t.iJd(24,21,t.eq3(27,L,e.finalPrice))),t.R7$(2),t.Y8G("ngIf",e.originalPrice!==e.finalPrice),t.R7$(),t.Y8G("ngIf",!n.isProductInCart(e.productId)),t.R7$(),t.Y8G("ngIf",n.isProductInCart(e.productId)),t.R7$(2),t.Y8G("ngIf",n.isProductInCart(e.productId)),t.R7$(),t.Mz_("routerLink","/customer-products/product-details/",e.productId,""),t.R7$(3),t.Y8G("ngIf",e.amount>0)}}function rn(o,s){if(1&o&&(t.j41(0,"div",12),t.DNE(1,on,34,29,"div",15),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.products)}}function sn(o,s){1&o&&(t.j41(0,"div",13),t.EFF(1," \u0644\u0627 \u064a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a "),t.k0s())}function un(o,s){if(1&o){const e=t.RV6();t.DNE(0,rn,2,1,"div",12)(1,sn,2,0,"div",13),t.j41(2,"div")(3,"mat-paginator",14),t.bIt("page",function(r){t.eBV(e);const i=t.XpG();return t.Njj(i.getProductsPaginated(r.pageIndex,r.pageSize))}),t.k0s()()}if(2&o){const e=t.XpG();t.vxM(e.products.length>0?0:1),t.R7$(3),t.Y8G("length",e.productsTotalAmount)("pageSize",e.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",t.lJ4(6,Le))("pageIndex",e.pageNumber)}}function cn(o,s){1&o&&t.nrm(0,"app-secondary-spinner")}let U=(()=>{class o{constructor(e,n,r,i,c,d){this.productService=e,this.snackBar=n,this.wishListService=r,this.cartService=i,this.accountService=c,this.route=d,this.hovering=!1,this.pageSize=12,this.pageNumber=0,this.productsTotalAmount=0,this.quantity=[],this.userId=-1,this.sortingOption="all",this.snackBarDurationInSeconds=5,this.isProductsLoading=!0,this.categoryId=0,this.subCategoryID=0,this.value=""}ngOnInit(){this.isProductsLoading=!0,this.route.paramMap.subscribe(e=>{this.categoryId=Number(e.get("categoryID")),this.subCategoryID=Number(e.get("subCategoryID")),this.value=e.get("value")+"",console.log(this.categoryId),console.log(this.subCategoryID),console.log(this.value),this.fetchproductsInSucategoryValue(this.categoryId,this.subCategoryID,this.value)}),this.userLoggedID=this.accountService.getTokenId(),this.userLoggedID&&this.fetchWishList(this.userLoggedID)}fetchproductsInSucategoryValue(e,n,r){const i=this.productService.getproductsbycategorySubcategoryValue(e,n,r).subscribe({next:c=>{this.products=c,this.isProductsLoading=!1;for(let d=0;d<this.products.length;d++)this.quantity.push(1)},error:c=>{console.error("Error fetching products:",c),this.isProductsLoading=!1}});this.subscriptions?.push(i)}getDiscountPercentage(e,n){return Math.round((e-n)/e*100)}addProductToWishList(e){this.wishListService.addWishListProduct(e).subscribe({next:n=>{console.log("from success section"),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 ","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds}),this.fetchWishList(this.userLoggedID)},error:n=>{console.log("error section"),console.log(n),this.snackBar.open("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649  \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds})}})}fetchWishList(e){this.wishListService.getWishList(e).subscribe(n=>{console.log("from success section"),console.log(n),this.wishList=n},n=>{console.log("error section"),console.log(n)})}isProductInWishlist(e){return!!this.wishList&&this.wishList.some(n=>n.productId===e)}removeFromWishList(e){this.wishListService.deleteWishListProduct(e.UserId,e.ProductId).subscribe(()=>{this.fetchWishList(this.userLoggedID),this.snackBar.open("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds})},n=>{console.error("Error removing product from wishlist:",n),this.snackBar.open("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1500*this.snackBarDurationInSeconds})})}addToCart(e,n){let r=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}'),i=this.accountService.getTokenId();console.log(r);let c={productId:e.productId,amount:this.quantity[n],categoryId:e.categoryId,categoryName:e.categoryName,description:e.description,discount:e.discount,finalPrice:e.finalPrice,name:e.name,originalPrice:e.originalPrice,productImages:e.productImages,allAmount:e.amount};i?(r.userId=this.userLoggedID,this.addItemToCart(e,this.quantity[n])):this.showNotification("\u062a\u0645 \u0623\u0636\u0627\u0641\u0629 \u0642\u0637\u0639\u0629 \u0645\u0646 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649 \u0627\u0644\u0633\u0644\u0629",!0),r.productsAmounts.push(c),r.numberOfUniqueProducts+=1,this.modifyCartAndAddItToLocalStorage(r,e,n)}addItemToCart(e,n){this.cartService.addToCart(e,n).subscribe({next:r=>{this.showNotification("\u062a\u0645 \u0623\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0625\u0644\u0649 \u0633\u0644\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a\u0643 \u0628\u0646\u062c\u0627\u062d",!0),console.log("adding to cart api")},error:r=>{this.showNotification("\u062a\u0639\u0630\u0631 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0649 \u0633\u0644\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a\u0643",!1)}})}showNotification(e,n){this.snackBar.openFromComponent(n?h.s:g.A,{data:e,duration:1e3*this.snackBarDurationInSeconds})}modifyCartAndAddItToLocalStorage(e,n,r){return e.finalPrice+=n.finalPrice*this.quantity[r],e.numberOfProducts+=this.quantity[r],localStorage.setItem("cart",JSON.stringify(e)),this.cartService.changeNumberOfItemsInCart(e.numberOfUniqueProducts),e}isProductInCart(e){return JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}').productsAmounts?.some(r=>r.productId===e)}removeFromCart(e){const n=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}'),r=n.productsAmounts.findIndex(i=>i.productId===e.productId);if(-1!==r){const i=n.productsAmounts[r].amount;n.productsAmounts.splice(r,1),n.numberOfUniqueProducts-=1,n.numberOfProducts-=i,n.finalPrice-=e.finalPrice*i,localStorage.setItem("cart",JSON.stringify(n)),this.cartService.changeNumberOfItemsInCart(n.numberOfUniqueProducts),this.userLoggedID&&this.cartService.deleteProductFromCart(this.userLoggedID,e.productId).subscribe({next:c=>{this.snackBar.open("\u062a\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0633\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds})},error:c=>{this.snackBar.open("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0633\u0644\u0629","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds})}}),this.showNotification("\u062a\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0633\u0644\u0629",!1)}}increaseQuantity(e){this.quantity[e]<this.products[e].amount?this.quantity[e]++:this.snackBar.open("\u0644\u0627 \u064a\u0648\u062c\u062f \u0643\u0645\u064a\u0629 \u0643\u0627\u0641\u064a\u0629 \u0641\u064a \u0627\u0644\u0645\u062e\u0632\u0648\u0646","\u0625\u063a\u0644\u0627\u0642",{duration:1e3*this.snackBarDurationInSeconds})}decreaseQuantity(e){this.quantity[e]>1&&this.quantity[e]--}validateSelectedProductAmount(e){this.quantity[e]<1?this.quantity[e]=1:this.quantity[e]>this.products[e].amount&&(this.quantity[e]=this.products[e].amount)}isProductReachedMaxAmount(e){const r=JSON.parse(localStorage.getItem("cart")||'{"userId": null, "productsAmounts": [], "finalPrice": 0, "numberOfUniqueProducts": 0, "numberOfProducts": 0}').productsAmounts?.find(i=>i.productId===e.productId);return!!r&&r.amount>=e.amount}ngOnDestroy(){this.subscriptions?.forEach(e=>e.unsubscribe())}getProductsPaginated(e,n){this.isProductsLoading=!0,this.pageNumber=e,this.pageSize=n,console.log(this.sortingOption),console.log(this.pageNumber),console.log(this.pageSize),"all"==this.sortingOption?(this.fetchproductsInSucategoryValue(this.categoryId,this.subCategoryID,this.value),this.products=this.products.slice(e*n,(e+1)*n)):"price_des"==this.sortingOption?(this.products=this.products.sort((r,i)=>i.finalPrice-r.finalPrice).slice(this.pageNumber*this.pageSize,(this.pageNumber+1)*this.pageSize),this.isProductsLoading=!1):"price_asc"==this.sortingOption?(this.products=this.products.sort((r,i)=>r.finalPrice-i.finalPrice).slice(e*n,(e+1)*n),this.isProductsLoading=!1):"amount_des"==this.sortingOption?(this.products=this.products.sort((r,i)=>i.amount-r.amount).slice(e*n,(e+1)*n),this.isProductsLoading=!1):"amount_asc"==this.sortingOption?(this.products=this.products.sort((r,i)=>r.amount-i.amount).slice(e*n,(e+1)*n),this.isProductsLoading=!1):"discount_des"==this.sortingOption?(this.products=this.products.sort((r,i)=>i.discount-r.discount).slice(e*n,(e+1)*n),this.isProductsLoading=!1):"discount_asc"==this.sortingOption&&(this.products=this.products.sort((r,i)=>r.discount-i.discount).slice(e*n,(e+1)*n),this.isProductsLoading=!1)}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(M.b),t.rXU(f.UG),t.rXU(y.B),t.rXU(v.m),t.rXU(_.D),t.rXU(m.nX))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-category-products"]],standalone:!0,features:[t.aNF],decls:22,vars:2,consts:[[1,"row"],[1,"col","mb-3","d-flex","flex-wrap"],[1,"col","mb-3","d-flex","justify-content-between","align-items-center","gap-3"],["for","sorting"],["id","sorting",1,"form-select",3,"change","ngModelChange","ngModel"],["value","all"],["value","price_des"],["value","price_asc"],["value","amount_des"],["value","amount_asc"],["value","discount_des"],["value","discount_asc"],[1,"product-list-container"],["role","alert",1,"alert","alert-danger","w-100","text-center",2,"margin-bottom","25rem","margin-top","25rem"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],[1,"card","rounded-3","mb-4"],[1,"card-body","p-4"],[1,"image-container","text-center"],[1,"img-fluid","rounded-3","image",3,"src","alt"],["class","position-absolute top-0 start-0 translate-middle badge-container","style","margin-top: -15px; margin-left: 13px; font-size: 20px;",4,"ngIf"],["class","wishbutton","title","\u0627\u0636\u0627\u0641\u0629 \u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629",3,"click",4,"ngIf"],["class","wishbutton","title","\u062d\u0630\u0641 \u0645\u0646 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629",3,"click",4,"ngIf"],["class","cartbutton ","title","\u0625\u0636\u0627\u0641\u0629 \u0642\u0637\u0639\u0629 \u0648\u0627\u062d\u062f\u0629 \u0641\u0642\u0637",3,"click",4,"ngIf"],["class","cartbutton",3,"click",4,"ngIf"],["class","cartbutton",4,"ngIf"],["class","cartbutton","style","background-color: rgba(255, 255, 255, 0); color: red;","title","\u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0633\u0644\u0629 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",3,"click",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"badge","bg-primary"],[2,"margin-top","1px"],[1,"mt-3"],[1,"price"],[4,"ngIf"],["class","d-flex align-items-center mb-3 quantity-section",4,"ngIf"],["class","d-flex align-items-center ",4,"ngIf"],[2,"margin-top","-10px"],["class","btn btn-danger w-100 mt-2",3,"click",4,"ngIf"],[1,"btn","btn-primary","w-100","mt-2",3,"routerLink"],["class","float-start  ","style","font-size: medium; margin-bottom: 5px; margin-right: 5px; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6);",4,"ngIf"],[1,"position-absolute","top-0","start-0","translate-middle","badge-container",2,"margin-top","-15px","margin-left","13px","font-size","20px"],[1,"badge","bg-success",2,"box-shadow","2px 2px 3px rgba(0, 0, 0, 0.6)"],["title","\u0627\u0636\u0627\u0641\u0629 \u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629",1,"wishbutton",3,"click"],[1,"fa-regular","fa-heart"],["title","\u062d\u0630\u0641 \u0645\u0646 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629",1,"wishbutton",3,"click"],[1,"fa-solid","fa-heart"],["title","\u0625\u0636\u0627\u0641\u0629 \u0642\u0637\u0639\u0629 \u0648\u0627\u062d\u062f\u0629 \u0641\u0642\u0637",1,"cartbutton",3,"click"],[1,"fas","fa-shopping-cart"],[1,"cartbutton",3,"click"],[1,"cartbutton"],["title","\u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0633\u0644\u0629 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",1,"cartbutton",2,"background-color","rgba(255, 255, 255, 0)","color","red",3,"click"],[1,"fa-solid","fa-ban"],[1,"badge","bg-success"],[1,"badge","bg-danger"],[1,"original-price"],[1,"d-flex","align-items-center","mb-3","quantity-section"],[1,"d-flex",2,"margin-top","7px"],["type","button",1,"btn","btn-outline-secondary","quantity-button",2,"border-top-right-radius","20%","border-bottom-right-radius","20%",3,"click"],["type","number","min","1",1,"form-control","quantity-input","QuantityValue",3,"ngModelChange","keyup","ngModel"],["type","button",1,"btn","btn-outline-secondary","quantity-button",2,"border-top-left-radius","20%","border-bottom-left-radius","20%",3,"click"],[1,"btn","btn-primary","w-100","mt-2","add-to-cart-button",3,"click","disabled"],[1,"d-flex","align-items-center"],[1,"btn","btn-danger","w-100","mt-2",3,"click"],[1,"float-start",2,"font-size","medium","margin-bottom","5px","margin-right","5px","text-shadow","1px 1px 2px rgba(0, 0, 0, 0.6)"]],template:function(n,r){1&n&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.j41(2,"div",2)(3,"label",3),t.EFF(4,"\u0627\u0644\u062a\u0631\u062a\u064a\u0628"),t.k0s(),t.j41(5,"select",4),t.bIt("change",function(){return r.getProductsPaginated(r.pageNumber,r.pageSize)}),t.mxI("ngModelChange",function(c){return t.DH7(r.sortingOption,c)||(r.sortingOption=c),c}),t.j41(6,"option",5),t.EFF(7,"\u0627\u0644\u0643\u0644"),t.k0s(),t.j41(8,"option",6),t.EFF(9,"\u0627\u0644\u0623\u0639\u0644\u0649 \u0633\u0639\u0631\u0627"),t.k0s(),t.j41(10,"option",7),t.EFF(11,"\u0627\u0644\u0623\u0642\u0644 \u0633\u0639\u0631\u0627"),t.k0s(),t.j41(12,"option",8),t.EFF(13,"\u0623\u0644\u0623\u0643\u062b\u0631 \u0643\u0645\u064a\u0629"),t.k0s(),t.j41(14,"option",9),t.EFF(15,"\u0623\u0644\u0623\u0642\u0644 \u0643\u0645\u064a\u0629"),t.k0s(),t.j41(16,"option",10),t.EFF(17,"\u0627\u0644\u0623\u0639\u0644\u0649 \u062e\u0635\u0645\u0627"),t.k0s(),t.j41(18,"option",11),t.EFF(19,"\u0627\u0644\u0623\u0642\u0644 \u062e\u0635\u0645\u0627"),t.k0s()()()(),t.DNE(20,un,4,7,"div")(21,cn,1,0,"app-secondary-spinner")),2&n&&(t.R7$(5),t.R50("ngModel",r.sortingOption),t.R7$(15),t.vxM(r.isProductsLoading?21:20))},dependencies:[m.Wk,a.oe,k.Ou,k.iy,a.MD,a.Sq,a.bT,u.YN,u.xH,u.y7,u.me,u.Q0,u.wz,u.BC,u.VZ,u.vS,O.l],styles:[".product-list-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.product-card[_ngcontent-%COMP%]{flex:1 1 calc(25.333% - 16px);box-sizing:border-box;max-width:calc(25% - 16px);display:flex;flex-direction:column}.card[_ngcontent-%COMP%]{border:1px solid #ddd;box-shadow:0 2px 8px #0000001a;transition:transform .2s;display:flex;flex-direction:column;flex-grow:1}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-body[_ngcontent-%COMP%]{padding:16px;text-align:center;display:flex;flex-direction:column;justify-content:space-between;flex-grow:1}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;margin-bottom:8px}h5[_ngcontent-%COMP%]{font-size:1.1em;margin-bottom:8px}.price[_ngcontent-%COMP%]{font-size:1.2em;color:#28a745}.original-price[_ngcontent-%COMP%]{font-size:1em;text-decoration:line-through;color:#dc3545;margin-right:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border:none}@media (max-width: 992px){.product-card[_ngcontent-%COMP%]{flex:1 1 calc(50% - 16px);max-width:calc(50% - 16px)}}@media (max-width: 768px){.product-card[_ngcontent-%COMP%]{flex:1 1 calc(100% - 16px);max-width:calc(100% - 16px)}}.product-card[_ngcontent-%COMP%]:hover{transform:scale(1.02);transition:transform .5s}.btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{margin-top:8px}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#004080}.wishbutton[_ngcontent-%COMP%]{color:red;font-size:25px;float:left;display:flex;border-radius:50%;position:absolute;top:10px;right:10px;background-color:#ffffffb3;border:none;padding:10px;cursor:pointer}.wishbutton[_ngcontent-%COMP%]:hover{color:#dc3545}.QuantityValue[_ngcontent-%COMP%]{width:50px;appearance:textfield;-webkit-appearance:textfield}.QuantityValue[_ngcontent-%COMP%]::-webkit-inner-spin-button, .QuantityValue[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.wishbutton[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:red}.wishbutton[_ngcontent-%COMP%]:hover{background-color:#fff}.cartbutton[_ngcontent-%COMP%]{color:green;font-size:25px;float:left;display:flex;border-radius:50%;position:absolute;top:60px;right:10px;background-color:#ffffffb3;border:none;padding:10px;cursor:pointer}.image-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.image[_ngcontent-%COMP%]{width:100%;height:auto}.cartbutton[_ngcontent-%COMP%]:hover{background-color:#fff}.notincart[_ngcontent-%COMP%]{background-color:#00800042;color:#ffffffda}.notincart[_ngcontent-%COMP%]:hover{background-color:#008000a9}.quantity-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:5px}.quantity-button[_ngcontent-%COMP%]{border:2px solid #ced4da;border-radius:0;width:30px;height:35px;display:flex;align-items:center;justify-content:center;background-color:#f8f9fa;font-size:22px}.quantity-button[_ngcontent-%COMP%]:hover{color:#b51cb0;font-weight:bolder;font-size:25px}.quantity-input[_ngcontent-%COMP%]{border:1px solid #ced4da;border-left:0;border-right:0;border-radius:0;text-align:center;height:35px}.add-to-cart-button[_ngcontent-%COMP%]{border:1px solid #ced4da;background-color:#f8f9fa;color:#b51cb0;padding:5px 10px;cursor:pointer;text-transform:uppercase;font-weight:700;transition:background-color .3s;margin-right:15px;border-radius:8px;font-size:10px;height:38px}@media (max-width: 1200px){.add-to-cart-button[_ngcontent-%COMP%]{height:50px}}.add-to-cart-button[_ngcontent-%COMP%]:hover{color:#f8f9fa;background-color:#b51cb0}"]})}return o})();const an=[{path:"",redirectTo:"/customer-products/products-list",pathMatch:"full"},{path:"product-details/:id",component:ee},{path:"products-list",component:It.K},{path:"products-wish-list",component:Pt},{path:"products-cart",component:mt},{path:"products-checkout",component:Y},{path:"confirm-order",component:he},{path:"customer-previous-orders",component:B},{path:"customer-previous-orders/:role",component:B},{path:"subcategoryproducts/:categoryID/:subCategoryID/:value",component:U},{path:"categoryproducts/:id",component:U}]}}]);