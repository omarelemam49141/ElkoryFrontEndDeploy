"use strict";(self.webpackChunkElkoryEcommerce=self.webpackChunkElkoryEcommerce||[]).push([[671],{9571:(D,x,d)=>{d.d(x,{r:()=>O});var b=d(4460),p=d(936),u=d(9471),a=d(7544),g=d(4960),f=d(7839),m=d(3124),M=d(7196),t=d(8891),v=d(7859),c=d(7650),l=d(1445);let O=(()=>{class C{constructor(I,h,P,k,A){this.dialogRef=I,this.data=h,this.snackBar=P,this.offerService=k,this.router=A,this.notificationDurationInSeconds=5}confirmOfferDelete(){this.offerService.deleteOffer(this.data.offerId).subscribe({next:()=>{this.snackBar.openFromComponent(m.s,{data:"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0639\u0631\u0636 \u0628\u0646\u062c\u0627\u062d",duration:1e3*this.notificationDurationInSeconds}),this.dialogRef.close(),this.router.navigate(["/admin-offers"])},error:()=>{this.snackBar.openFromComponent(M.A,{data:"\u062a\u0639\u0630\u0631 \u062d\u0630\u0641 \u0627\u0644\u0639\u0631\u0636",duration:1e3*this.notificationDurationInSeconds})}})}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(h){return new(h||C)(t.rXU(a.CP),t.rXU(a.Vh),t.rXU(v.UG),t.rXU(c.Y),t.rXU(l.Ix))};static#n=this.\u0275cmp=t.VBU({type:C,selectors:[["app-delete-offer"]],standalone:!0,features:[t.aNF],decls:12,vars:2,consts:[["mat-dialog-title","",1,"dialog-title"],[1,"font-bold","text-danger"],["maxWidth","90vw",1,"dialog-content"],[1,"lead"],[1,"dialog-actions"],["mat-button","",1,"btn","btn-danger",3,"click"],["mat-button","",1,"btn","btn-secondary",3,"click"]],template:function(h,P){1&h&&(t.j41(0,"h2",0),t.EFF(1,"\u062d\u0630\u0641 \u0627\u0644\u0639\u0631\u0636 "),t.j41(2,"span",1),t.EFF(3),t.k0s()(),t.j41(4,"mat-dialog-content",2)(5,"p",3),t.EFF(6),t.k0s()(),t.j41(7,"mat-dialog-actions",4)(8,"button",5),t.bIt("click",function(){return P.confirmOfferDelete()}),t.EFF(9,"\u062d\u0630\u0641"),t.k0s(),t.j41(10,"button",6),t.bIt("click",function(){return P.onNoClick()}),t.EFF(11,"\u0627\u0644\u063a\u0627\u0621"),t.k0s()()),2&h&&(t.R7$(3),t.JRh(P.data.offerTitle),t.R7$(3),t.SpI("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0639\u0631\u0636 ",P.data.offerTitle,""))},dependencies:[g.RG,f.fS,p.YN,u.Hl,u.$z,a.BI,a.Yi,a.E7,b.MD]})}return C})()},9671:(D,x,d)=>{d.d(x,{u:()=>nt});var b=d(1445),p=d(7196),u=d(4460),a=d(936),g=d(9471),f=d(7544),m=d(4960),M=d(7839),t=d(8891),v=d(7023);function c(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",7)(1,"button",8),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.addProductToOffer())}),t.EFF(2,"\u0627\u0636\u0627\u0641\u0629"),t.k0s()()}}let l=(()=>{class e{constructor(n,r){this.productService=n,this.fb=r,this.productAddedToOffer=new t.bkB}ngOnInit(){this.addProductForm=this.fb.group({productId:[this.product.productId,[a.k0.required]],name:[this.product.name,[a.k0.required]],image:[this.productImage,[a.k0.required]],productAmount:[1,[a.k0.required,a.k0.min(1)]],discount:[0,[a.k0.required,a.k0.min(0),a.k0.max(100)]]}),this.productService.getPictures(this.product.productId).subscribe({next:n=>{this.productImage=n.length>0?n[0]:"assets/images/no-image.png"},error:n=>{this.productImage="assets/images/no-image.png"}})}ngOnChanges(){}addProductToOffer(){this.productAddedToOffer.emit({productId:this.product.productId,productAmount:this.addProductForm.value.productAmount,discount:this.addProductForm.value.discount,name:this.addProductForm.value.name,image:this.productImage})}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(v.b),t.rXU(a.ok))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["app-product-card"]],inputs:{product:"product",offerId:"offerId",editProduct:"editProduct"},outputs:{productAddedToOffer:"productAddedToOffer"},standalone:!0,features:[t.OA$,t.aNF],decls:14,vars:6,consts:[[1,"card","border-primary"],["alt","Title",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-danger"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-outline-success","btn-sm","ms-3","mb-2",3,"click"]],template:function(r,o){1&r&&(t.j41(0,"div",0),t.nrm(1,"img",1),t.j41(2,"div",2)(3,"h4",3),t.EFF(4),t.k0s(),t.j41(5,"p",4),t.EFF(6),t.k0s(),t.j41(7,"p",4),t.EFF(8),t.k0s(),t.j41(9,"p",4),t.EFF(10,"discount: "),t.j41(11,"span",5),t.EFF(12),t.k0s()()(),t.DNE(13,c,3,0,"div",6),t.k0s()),2&r&&(t.R7$(),t.Y8G("src",o.productImage,t.B4B),t.R7$(3),t.JRh(o.product.name),t.R7$(2),t.SpI("category: ",o.product.categoryName,""),t.R7$(2),t.SpI("price: ",o.product.finalPrice,""),t.R7$(4),t.SpI("-",o.product.discount,""),t.R7$(),t.Y8G("ngIf",!o.editProduct))},dependencies:[a.X1,u.MD,u.bT],styles:["img[_ngcontent-%COMP%]{width:100px}"]})}return e})();var O=d(3124),C=d(7859),T=d(7650);function I(e,i){if(1&e&&(t.j41(0,"h2",14),t.EFF(1,"\u0627\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u0627\u0644\u0649 \u0627\u0644\u0639\u0631\u0636 "),t.j41(2,"span",15),t.EFF(3),t.k0s()()),2&e){const n=t.XpG();t.R7$(3),t.JRh(n.data.offerTitle)}}function h(e,i){if(1&e&&(t.j41(0,"h2",14),t.EFF(1),t.j41(2,"span",15),t.EFF(3),t.k0s()()),2&e){const n=t.XpG();t.R7$(),t.SpI("\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c ",n.productToEdit.name," \u0641\u0649 \u0627\u0644\u0639\u0631\u0636 "),t.R7$(2),t.JRh(n.data.offerTitle)}}function P(e,i){1&e&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628"),t.k0s())}function k(e,i){if(1&e&&(t.j41(0,"mat-error"),t.DNE(1,P,2,0,"span",8),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==n.productId||null==n.productId.errors?null:n.productId.errors.required)}}function A(e,i){if(1&e){const n=t.RV6();t.j41(0,"app-product-card",19),t.bIt("productAddedToOffer",function(o){t.eBV(n);const s=t.XpG(2);return t.Njj(s.addProductToForm(o))}),t.k0s()}if(2&e){const n=i.$implicit,r=t.XpG(2);t.Y8G("product",n)("offerId",r.data.offerId)("editProduct",!1)}}function R(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",5)(1,"mat-form-field",6)(2,"mat-label"),t.EFF(3,"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c"),t.k0s(),t.j41(4,"input",16,0),t.bIt("input",function(){t.eBV(n);const o=t.sdS(5),s=t.XpG();return t.Njj(s.searchProductByName(o.value))}),t.k0s(),t.DNE(6,k,2,1,"mat-error",8),t.k0s(),t.j41(7,"div",17),t.DNE(8,A,1,3,"app-product-card",18),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(6),t.Y8G("ngIf",!(null!=n.productId&&n.productId.valid)&&(null==n.productId?null:n.productId.touched)),t.R7$(2),t.Y8G("ngForOf",n.searchedProducts)}}function y(e,i){if(1&e&&(t.j41(0,"div",5)(1,"div",17),t.nrm(2,"app-product-card",20),t.k0s()()),2&e){const n=t.XpG();t.R7$(2),t.Y8G("product",n.productToEdit)("offerId",n.data.offerId)("editProduct",!0)}}function j(e,i){1&e&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0644\u0643\u0645\u064a\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"),t.k0s())}function $(e,i){1&e&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0644\u0643\u0645\u064a\u0629 \u064a\u062c\u0628 \u0627\u0644\u0627 \u062a\u0642\u0644 \u0639\u0646 \u0635\u0641\u0631"),t.k0s())}function B(e,i){if(1&e&&(t.j41(0,"mat-error"),t.DNE(1,j,2,0,"span",8)(2,$,2,0,"span",8),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.productAmount||null==n.productAmount.errors?null:n.productAmount.errors.required),t.R7$(),t.Y8G("ngIf",null==n.productAmount||null==n.productAmount.errors?null:n.productAmount.errors.min)}}function S(e,i){1&e&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0644\u062e\u0635\u0645 \u0645\u0637\u0644\u0648\u0628"),t.k0s())}function G(e,i){1&e&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0642\u0644 \u0639\u0646 \u0635\u0641\u0631%"),t.k0s())}function U(e,i){1&e&&(t.j41(0,"span"),t.EFF(1,"\u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0632\u064a\u062f \u0639\u0646 100%"),t.k0s())}function X(e,i){if(1&e&&(t.j41(0,"mat-error"),t.DNE(1,S,2,0,"span",8)(2,G,2,0,"span",8)(3,U,2,0,"span",8),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.discount||null==n.discount.errors?null:n.discount.errors.required),t.R7$(),t.Y8G("ngIf",null==n.discount||null==n.discount.errors?null:n.discount.errors.min),t.R7$(),t.Y8G("ngIf",null==n.discount||null==n.discount.errors?null:n.discount.errors.max)}}function N(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.updateOfferProduct())}),t.EFF(1,"\u062d\u0641\u0638"),t.k0s()}if(2&e){const n=t.XpG();t.Y8G("disabled",n.addProductForm.invalid)}}let Y=(()=>{class e{constructor(n,r,o,s,E,F){this.dialogRef=n,this.data=r,this.fb=o,this.productService=s,this.snackBar=E,this.offerService=F,this.searchedProductsPageSize=5,this.searchedProductsPageNumber=1,this.totalPages=0,this.totalItems=0,this.searchedProducts=[],this.notificationDurationInSeconds=5,this.searchedProductsObserver={next:_=>{this.totalPages=_.totalPages,this.totalItems=_.totalItems,this.searchedProducts=_.items},error:_=>{this.snackBar.openFromComponent(p.A,{data:"\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",duration:1e3*this.notificationDurationInSeconds})}},this.addProductForm=this.fb.group({offerId:[this.data.offerId,[a.k0.required]],productId:[this.data.productId??"",[a.k0.required]],productAmount:[this.data.productAmount??"",[a.k0.required,a.k0.min(1)]],discount:[this.data.discount??"",[a.k0.min(0),a.k0.max(100)]]})}ngOnInit(){this.data.productId&&this.productService.getById(this.data.productId).subscribe({next:n=>{this.productToEdit=n},error:n=>{this.snackBar.openFromComponent(p.A,{data:"\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c",duration:1e3*this.notificationDurationInSeconds})}})}searchProductByName(n){n?this.productService.searchByProductName(n,this.searchedProductsPageNumber,this.searchedProductsPageSize).subscribe(this.searchedProductsObserver):this.searchedProducts=[]}onNoClick(){this.dialogRef.close()}addProductToForm(n){if(this.productAmount?.valid&&this.discount?.valid){this.addProductForm.patchValue({productId:n.productId});let r={productId:this.addProductForm.value.productId,productAmount:this.addProductForm.value.productAmount,discount:this.addProductForm.value.discount};this.offerService.addProductToOffer(+this.offerId?.value,r).subscribe({next:()=>{this.snackBar.openFromComponent(O.s,{data:"\u062a\u0645\u062a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d",duration:1e3*this.notificationDurationInSeconds}),this.dialogRef.close(!0)},error:o=>{this.snackBar.openFromComponent(p.A,{data:o.message,duration:1e3*this.notificationDurationInSeconds})}})}}updateOfferProduct(){let n={productId:this.productToEdit.productId,productAmount:this.addProductForm.value.productAmount,discount:this.addProductForm.value.discount};this.offerService.updateProductOffer(+this.offerId?.value,+this.productId?.value,n).subscribe({next:()=>{this.snackBar.openFromComponent(O.s,{data:"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d",duration:1e3*this.notificationDurationInSeconds}),this.dialogRef.close(!0)},error:r=>{this.snackBar.openFromComponent(p.A,{data:r.message,duration:1e3*this.notificationDurationInSeconds})}})}get offerId(){return this.addProductForm.get("offerId")}get productId(){return this.addProductForm.get("productId")}get productAmount(){return this.addProductForm.get("productAmount")}get discount(){return this.addProductForm.get("discount")}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(f.CP),t.rXU(f.Vh),t.rXU(a.ok),t.rXU(v.b),t.rXU(C.UG),t.rXU(T.Y))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["app-add-offer-product"]],standalone:!0,features:[t.aNF],decls:22,vars:8,consts:[["productName",""],["mat-dialog-title","","class","dialog-title",4,"ngIf"],["maxWidth","90vw",1,"dialog-content"],[3,"formGroup"],["class","form-group mb-3",4,"ngIf"],[1,"form-group","mb-3"],["appearance","fill"],["matInput","","formControlName","productAmount","type","number","placeholder","\u0627\u062f\u062e\u0644 \u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0646\u062a\u062c","min","1"],[4,"ngIf"],[1,"form-group"],["matInput","","formControlName","discount","type","number","placeholder","\u0627\u062f\u062e\u0644 \u0627\u0644\u062e\u0635\u0645","min","0","max","100"],[1,"dialog-actions"],["mat-button","",1,"btn","btn-secondary",3,"click"],["mat-button","","class","btn btn-success",3,"disabled","click",4,"ngIf"],["mat-dialog-title","",1,"dialog-title"],[1,"font-bold","text-success"],["matInput","","type","search","placeholder","\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c",3,"input"],[1,"searchedProducts"],[3,"product","offerId","editProduct","productAddedToOffer",4,"ngFor","ngForOf"],[3,"productAddedToOffer","product","offerId","editProduct"],[3,"product","offerId","editProduct"],["mat-button","",1,"btn","btn-success",3,"click","disabled"]],template:function(r,o){1&r&&(t.DNE(0,I,4,1,"h2",1)(1,h,4,2,"h2",1),t.j41(2,"mat-dialog-content",2)(3,"form",3),t.DNE(4,R,9,2,"div",4)(5,y,3,3,"div",4),t.j41(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t.EFF(9,"\u0623\u0642\u0644 \u0643\u0645\u064a\u0629 \u0644\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u0639\u0631\u0636"),t.k0s(),t.nrm(10,"input",7),t.DNE(11,B,3,2,"mat-error",8),t.k0s()(),t.j41(12,"div",9)(13,"mat-form-field",6)(14,"mat-label"),t.EFF(15,"\u0627\u0644\u062e\u0635\u0645 (%)"),t.k0s(),t.nrm(16,"input",10),t.DNE(17,X,4,3,"mat-error",8),t.k0s()()()(),t.j41(18,"mat-dialog-actions",11)(19,"button",12),t.bIt("click",function(){return o.onNoClick()}),t.EFF(20,"\u0627\u0644\u063a\u0627\u0621"),t.k0s(),t.DNE(21,N,2,1,"button",13),t.k0s()),2&r&&(t.Y8G("ngIf",!o.productToEdit),t.R7$(),t.Y8G("ngIf",o.productToEdit),t.R7$(2),t.Y8G("formGroup",o.addProductForm),t.R7$(),t.Y8G("ngIf",!o.data.productId),t.R7$(),t.Y8G("ngIf",o.data.productId&&o.productToEdit),t.R7$(6),t.Y8G("ngIf",!(null!=o.productAmount&&o.productAmount.valid)&&(null==o.productAmount?null:o.productAmount.touched)),t.R7$(6),t.Y8G("ngIf",!(null!=o.discount&&o.discount.valid)&&(null==o.discount?null:o.discount.touched)),t.R7$(4),t.Y8G("ngIf",o.data.productId))},dependencies:[m.RG,m.rl,m.nJ,m.TL,M.fS,M.fg,a.YN,a.qT,a.me,a.Q0,a.BC,a.cb,a.VZ,a.zX,g.Hl,g.$z,f.BI,f.Yi,f.E7,a.X1,a.j4,a.JD,l,u.MD,u.Sq,u.bT],styles:["*[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Cairo,sans-serif!important}.searchedProducts[_ngcontent-%COMP%]{display:flex;gap:20px;overflow-x:auto;flex-wrap:nowrap}"]})}return e})();var w=d(9571),L=d(345);const W=(e,i)=>i.productId,V=e=>["/admin-offers/edit-offer",e],K=e=>["/customer-products/product-details",e];function z(e,i){if(1&e){const n=t.RV6();t.j41(0,"li",23)(1,"a",24),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.confirmOfferDelete(o.offer.offerId,o.offer.title))}),t.nrm(2,"i",25),t.EFF(3,"\u062d\u0630\u0641 \u0627\u0644\u0639\u0631\u0636"),t.k0s()(),t.j41(4,"li",26)(5,"a",27),t.nrm(6,"i",28),t.EFF(7,"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0631\u0636"),t.k0s()()}if(2&e){const n=t.XpG(2);t.R7$(5),t.Y8G("routerLink",t.eq3(1,V,n.offer.offerId))}}function J(e,i){if(1&e){const n=t.RV6();t.j41(0,"button",29),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.addOfferProduct(o.offer.offerId,o.offer.title))}),t.EFF(1,"\u0627\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u0627\u0644\u0649 \u0627\u0644\u0639\u0631\u0636"),t.k0s()}}function H(e,i){if(1&e&&(t.j41(0,"span",37),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI("-",n.discount,"%")}}function Z(e,i){if(1&e){const n=t.RV6();t.j41(0,"a",38),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.deleteOfferProduct(s.offer.offerId,o.productId))}),t.EFF(1,"\u062d\u0630\u0641"),t.k0s(),t.j41(2,"a",39),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.addOfferProduct(s.offer.offerId,s.offer.title,o.productId,o.productAmount,o.discount))}),t.EFF(3,"\u062a\u0639\u062f\u064a\u0644"),t.k0s()}}function Q(e,i){if(1&e&&(t.j41(0,"a",36),t.EFF(1,"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c"),t.k0s()),2&e){const n=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(1,K,n.productId))}}function q(e,i){if(1&e&&(t.j41(0,"div",22)(1,"div",30)(2,"div",31),t.DNE(3,H,2,1,"span",32),t.nrm(4,"img",33),t.k0s(),t.j41(5,"div",34)(6,"div",35)(7,"h4"),t.EFF(8),t.k0s(),t.j41(9,"h5"),t.EFF(10),t.k0s()(),t.DNE(11,Z,4,0)(12,Q,2,3,"a",36),t.k0s()()()),2&e){const n=i.$implicit,r=i.$index,o=t.XpG(2);t.R7$(3),t.Y8G("ngIf",n.discount),t.R7$(),t.Y8G("src",o.productsImage[r]?o.productsImage[r]:"assets/images/no-image.png",t.B4B),t.R7$(4),t.JRh(n.name),t.R7$(2),t.SpI("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0644\u062a\u063a\u0639\u064a\u0644 \u0627\u0644\u0639\u0631\u0636: ",n.productAmount,""),t.R7$(),t.vxM(o.isCustomer?12:11)}}function tt(e,i){if(1&e&&(t.j41(0,"section",0)(1,"div",1)(2,"h1",2),t.EFF(3),t.k0s(),t.j41(4,"article",3)(5,"a",4),t.nrm(6,"img",5),t.k0s(),t.j41(7,"div",6)(8,"h1",7)(9,"a",8),t.EFF(10),t.k0s()(),t.j41(11,"div",9)(12,"time",10),t.nrm(13,"i",11),t.EFF(14),t.nI1(15,"date"),t.k0s()(),t.nrm(16,"div",12),t.j41(17,"div",13),t.EFF(18),t.k0s(),t.j41(19,"ul",14)(20,"li",15),t.nrm(21,"i",16),t.EFF(22," -"),t.j41(23,"span",17),t.EFF(24),t.nI1(25,"currency"),t.k0s()(),t.j41(26,"li",15),t.nrm(27,"i",18),t.EFF(28),t.nI1(29,"date"),t.k0s(),t.DNE(30,z,8,3),t.k0s()()(),t.j41(31,"div",19),t.DNE(32,J,2,0,"button",20),t.j41(33,"h3",21),t.EFF(34,"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u062a\u064a \u064a\u0645\u062a\u0644\u0643\u0647\u0627 \u0627\u0644\u0639\u0631\u0636"),t.k0s(),t.Z7z(35,q,13,5,"div",22,W),t.k0s()()()),2&e){const n=t.XpG();t.R7$(3),t.SpI("",n.offer.title," \u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0639\u0631\u0636"),t.R7$(3),t.FS9("src",n.offer.image,t.B4B),t.R7$(4),t.JRh(n.offer.title),t.R7$(4),t.SpI("",t.i5U(15,9,n.offer.offerDate,"dd/MM/yyyy")," "),t.R7$(4),t.JRh(n.offer.description),t.R7$(6),t.JRh(t.i5U(25,12,n.offer.packageDiscount,"\u062c.\u0645")),t.R7$(4),t.SpI("",t.i5U(29,15,n.offer.duration,"dd")," \u064a\u0648\u0645"),t.R7$(2),t.vxM(n.isCustomer?-1:30),t.R7$(2),t.Y8G("ngIf",!n.isCustomer),t.R7$(3),t.Dyx(n.offer.productOffers)}}let nt=(()=>{class e{constructor(n,r,o,s,E,F){this.genericService=n,this.snackBar=r,this.activatedRoute=o,this.dialog=s,this.offerService=E,this.productService=F,this.isCustomer=!1,this.productsImage=[],this.subscriptions=[],this.notificationDurationInSeconds=5,this.offerDetailsObserver={next:_=>{this.offer=_,this.offer.productOffers.forEach(et=>{this.productService.getPictures(et.productId).subscribe(ot=>{this.productsImage.push(ot[0])})})},error:_=>{this.snackBar.openFromComponent(p.A,{data:"\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0639\u0631\u0636!",duration:1e3*this.notificationDurationInSeconds})}}}ngOnInit(){this.loadOfferInfo()}ngOnChanges(n){this.loadOfferInfo()}loadOfferInfo(){this.subscriptions.push(this.offerId?this.genericService.getById("Offers",this.offerId).subscribe(this.offerDetailsObserver):this.activatedRoute.paramMap.subscribe(n=>{let r=Number(n.get("id"));"customer"==n.get("role")&&(this.isCustomer=!0),r?this.subscriptions.push(this.genericService.getById("Offers",r).subscribe(this.offerDetailsObserver)):this.snackBar.openFromComponent(p.A,{data:"\u0647\u0630\u0627 \u0627\u0644\u0639\u0631\u0636 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f!",duration:1e3*this.notificationDurationInSeconds})}))}addOfferProduct(n,r,o,s,E){this.dialog.open(Y,{data:{offerId:n,offerTitle:r,productId:o,productAmount:s,discount:E},width:"90vw"}).afterClosed().subscribe(_=>{1==_&&this.loadOfferInfo()})}deleteOfferProduct(n,r){this.offerService.deleteProductFromOffer(n,r).subscribe({next:()=>{this.snackBar.openFromComponent(O.s,{data:"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0639\u0631\u0636 \u0628\u0646\u062c\u0627\u062d",duration:1e3*this.notificationDurationInSeconds}),this.loadOfferInfo()},error:()=>{this.snackBar.openFromComponent(p.A,{data:"\u062a\u0639\u0630\u0631 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0627\u0644\u0639\u0631\u0636",duration:1e3*this.notificationDurationInSeconds})}})}confirmOfferDelete(n,r){this.dialog.open(w.r,{data:{offerId:n,offerTitle:r}})}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(L.X),t.rXU(C.UG),t.rXU(b.nX),t.rXU(f.bZ),t.rXU(T.Y),t.rXU(v.b))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["app-offer-details"]],inputs:{offerId:"offerId",isCustomer:"isCustomer"},standalone:!0,features:[t.OA$,t.aNF],decls:1,vars:1,consts:[["dir","ltr",1,"dark"],[1,"container"],["id","pageHeaderTitle",1,"h1","text-center"],[1,"postcard","dark","blue"],[1,"postcard__img_link"],["alt","Image Title",1,"postcard__img",3,"src"],[1,"postcard__text"],[1,"postcard__title","blue"],["href","#"],[1,"postcard__subtitle","small"],["datetime","2020-05-25 12:00:00"],[1,"fas","fa-calendar-alt","me-2"],[1,"postcard__bar"],[1,"postcard__preview-txt"],[1,"postcard__tagbox"],[1,"tag__item"],[1,"fas","fa-dollar-sign","me-2"],[1,"text-success","font-bold"],[1,"fas","fa-clock","me-2"],["id","ads",1,"row","mt-4"],["class","btn btn-primary w-50 m-auto","type","button",3,"click",4,"ngIf"],[1,"text-center","text-light","my-4"],[1,"col-md-4","col-lg-3","mb-3"],[1,"tag__item","play","red"],[3,"click"],[1,"fas","fa-trash","me-2"],[1,"tag__item","play","blue"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fas","fa-edit","me-2"],["type","button",1,"btn","btn-primary","w-50","m-auto",3,"click"],[1,"card","rounded"],[1,"card-image"],["class","card-notify-year",4,"ngIf"],["alt","Alternate Text",1,"img-fluid",3,"src"],[1,"card-body","text-center"],[1,"ad-title","m-auto"],[1,"ad-btn",3,"routerLink"],[1,"card-notify-year"],[1,"ad-btn","delete",3,"click"],[1,"ad-btn",3,"click"]],template:function(r,o){1&r&&t.DNE(0,tt,37,18,"section",0),2&r&&t.vxM(o.offer?0:-1)},dependencies:[u.vh,u.oe,u.MD,u.bT,b.Wk],styles:['@import"https://fonts.googleapis.com/css2?family=Baloo+2&display=swap";body[_ngcontent-%COMP%]{font-family:"Baloo 2",cursive;font-size:16px;color:#fff;text-rendering:optimizeLegibility;font-weight:initial}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Cairo,sans-serif}.dark[_ngcontent-%COMP%]{background:#110f16;padding:2rem}.light[_ngcontent-%COMP%]{background:#f3f5f7}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{text-decoration:none;transition:color .3s ease-in-out}#pageHeaderTitle[_ngcontent-%COMP%]{margin:2rem 0;text-transform:uppercase;text-align:center;font-size:2.5rem;color:#fff}.postcard[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex;box-shadow:0 4px 21px -12px #000000a8;border-radius:10px;margin:0 0 2rem;overflow:hidden;position:relative;color:#fff}.postcard.dark[_ngcontent-%COMP%]{background-color:#18151f}.postcard.light[_ngcontent-%COMP%]{background-color:#e1e5ea}.postcard[_ngcontent-%COMP%]   .t-dark[_ngcontent-%COMP%]{color:#18151f}.postcard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit}.postcard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .postcard[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;line-height:1.2}.postcard[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:80%}.postcard[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]{font-size:1.75rem}.postcard[_ngcontent-%COMP%]   .postcard__img[_ngcontent-%COMP%]{max-height:180px;width:100%;object-fit:cover;position:relative}.postcard[_ngcontent-%COMP%]   .postcard__img_link[_ngcontent-%COMP%]{display:contents}.postcard[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{width:50px;height:10px;margin:10px 0;border-radius:5px;background-color:#424242;transition:width .2s ease}.postcard[_ngcontent-%COMP%]   .postcard__text[_ngcontent-%COMP%]{padding:1.5rem;position:relative;display:flex;flex-direction:column}.postcard[_ngcontent-%COMP%]   .postcard__preview-txt[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;text-align:justify;height:100%}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;font-size:14px;margin:20px 0 0;padding:0;justify-content:center}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .tag__item[_ngcontent-%COMP%]{display:inline-block;background:#53535366;border-radius:3px;padding:2.5px 10px;margin:0 5px 5px 0;cursor:default;-webkit-user-select:none;user-select:none;transition:background-color .3s}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .tag__item[_ngcontent-%COMP%]:hover{background:#535353cc}.postcard[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:linear-gradient(-70deg,#424242,transparent 50%);opacity:1;border-radius:10px}.postcard[_ngcontent-%COMP%]:hover   .postcard__bar[_ngcontent-%COMP%]{width:100px}@media screen and (min-width: 769px){.postcard[_ngcontent-%COMP%]{flex-wrap:inherit}.postcard[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]{font-size:2rem}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]{justify-content:start}.postcard[_ngcontent-%COMP%]   .postcard__img[_ngcontent-%COMP%]{max-width:300px;max-height:100%;transition:transform .3s ease}.postcard[_ngcontent-%COMP%]   .postcard__text[_ngcontent-%COMP%]{padding:3rem;width:100%}.postcard[_ngcontent-%COMP%]   .media.postcard__text[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;background:#18151f;top:-20%;height:130%;width:55px}.postcard[_ngcontent-%COMP%]:hover   .postcard__img[_ngcontent-%COMP%]{transform:scale(1.1)}.postcard[_ngcontent-%COMP%]:nth-child(odd){flex-direction:row}.postcard[_ngcontent-%COMP%]:nth-child(2n){flex-direction:row-reverse}.postcard[_ngcontent-%COMP%]:nth-child(odd)   .postcard__text[_ngcontent-%COMP%]:before{left:-12px!important;transform:rotate(4deg)}.postcard[_ngcontent-%COMP%]:nth-child(2n)   .postcard__text[_ngcontent-%COMP%]:before{right:-12px!important;transform:rotate(-4deg)}}@media screen and (min-width: 1024px){.postcard__text[_ngcontent-%COMP%]{padding:2rem 3.5rem}.postcard__text[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;top:-20%;height:130%;width:55px}.postcard.dark[_ngcontent-%COMP%]   .postcard__text[_ngcontent-%COMP%]:before{background:#18151f}.postcard.light[_ngcontent-%COMP%]   .postcard__text[_ngcontent-%COMP%]:before{background:#e1e5ea}}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .green.play[_ngcontent-%COMP%]:hover{background:#79dd09;color:#000}.green[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]:hover{color:#79dd09}.green[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{background-color:#79dd09}.green[_ngcontent-%COMP%]:before{background-image:linear-gradient(-30deg,rgba(121,221,9,.1),transparent 50%)}.green[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(30deg,rgba(121,221,9,.1),transparent 50%)}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .blue.play[_ngcontent-%COMP%]:hover{background:#0076bd}.blue[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]:hover{color:#0076bd}.blue[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{background-color:#0076bd}.blue[_ngcontent-%COMP%]:before{background-image:linear-gradient(-30deg,rgba(0,118,189,.1),transparent 50%)}.blue[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(30deg,rgba(0,118,189,.1),transparent 50%)}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .red.play[_ngcontent-%COMP%]:hover{background:#bd150b}.red[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]:hover{color:#bd150b}.red[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{background-color:#bd150b}.red[_ngcontent-%COMP%]:before{background-image:linear-gradient(-30deg,rgba(189,21,11,.1),transparent 50%)}.red[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(30deg,rgba(189,21,11,.1),transparent 50%)}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .yellow.play[_ngcontent-%COMP%]:hover{background:#bdbb49;color:#000}.yellow[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]:hover{color:#bdbb49}.yellow[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{background-color:#bdbb49}.yellow[_ngcontent-%COMP%]:before{background-image:linear-gradient(-30deg,rgba(189,187,73,.1),transparent 50%)}.yellow[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(30deg,rgba(189,187,73,.1),transparent 50%)}@media screen and (min-width: 769px){.green[_ngcontent-%COMP%]:before{background-image:linear-gradient(-80deg,rgba(121,221,9,.1),transparent 50%)}.green[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(80deg,rgba(121,221,9,.1),transparent 50%)}.blue[_ngcontent-%COMP%]:before{background-image:linear-gradient(-80deg,rgba(0,118,189,.1),transparent 50%)}.blue[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(80deg,rgba(0,118,189,.1),transparent 50%)}.red[_ngcontent-%COMP%]:before{background-image:linear-gradient(-80deg,rgba(189,21,11,.1),transparent 50%)}.red[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(80deg,rgba(189,21,11,.1),transparent 50%)}.yellow[_ngcontent-%COMP%]:before{background-image:linear-gradient(-80deg,rgba(189,187,73,.1),transparent 50%)}.yellow[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(80deg,rgba(189,187,73,.1),transparent 50%)}}#ads[_ngcontent-%COMP%]   .card-notify-badge[_ngcontent-%COMP%]{position:absolute;left:-10px;top:-20px;background:#f2d900;text-align:center;border-radius:30px;color:#000;padding:5px 10px;font-size:14px}#ads[_ngcontent-%COMP%]   .card-notify-year[_ngcontent-%COMP%]{position:absolute;right:-10px;top:-20px;background:#f44;border-radius:50%;text-align:center;color:#fff;font-size:14px;width:50px;height:50px;padding:15px 0 0}#ads[_ngcontent-%COMP%]   .card-detail-badge[_ngcontent-%COMP%]{background:#f2d900;text-align:center;border-radius:30px;color:#000;padding:5px 10px;font-size:14px}#ads[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{background:#fff;box-shadow:12px 15px 20px #2e3d4926;border-radius:4px;transition:all .3s ease}#ads[_ngcontent-%COMP%]   .card-image-overlay[_ngcontent-%COMP%]{font-size:20px}#ads[_ngcontent-%COMP%]   .card-image-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}#ads[_ngcontent-%COMP%]   .ad-btn[_ngcontent-%COMP%]{text-transform:uppercase;width:150px;height:40px;border-radius:80px;font-size:16px;line-height:35px;text-align:center;border:3px solid #e6de08;display:block;text-decoration:none;margin:20px auto 1px;color:#000;overflow:hidden;position:relative;background-color:#e6de08}#ads[_ngcontent-%COMP%]   .ad-btn.delete[_ngcontent-%COMP%]{background-color:var(#bd150b);color:#1e1717;border:2px solid var(#bd150b);background:transparent;transition:all .3s ease;box-shadow:12px 15px 20px #2e3d4926}#ads[_ngcontent-%COMP%]   .ad-btn[_ngcontent-%COMP%]:hover{background-color:#e6de08;color:#1e1717;border:2px solid #e6de08;background:transparent;transition:all .3s ease;box-shadow:12px 15px 20px #2e3d4926}#ads[_ngcontent-%COMP%]   .ad-btn.delete[_ngcontent-%COMP%]:hover{background-color:#e60808;color:#1e1717;border:2px solid #e60808;background:transparent;transition:all .3s ease;box-shadow:12px 15px 20px #2e3d4926}#ads[_ngcontent-%COMP%]   .ad-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{text-transform:uppercase;font-size:18px}']})}return e})()},7650:(D,x,d)=>{d.d(x,{Y:()=>M});var b=d(8915),p=d(5903),u=d(7178),a=d(7151),g=d(8891),f=d(7691),m=d(345);let M=(()=>{class t{handlingAddProductToOfferErrors(c){return(0,b.$)(500==c.status?()=>new Error("\u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0648\u062c\u0648\u062f \u0636\u0645\u0646 \u0627\u0644\u0639\u0631\u0636 \u0628\u0627\u0644\u0641\u0639\u0644"):()=>new Error("\u062a\u0639\u0630\u0631 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0649 \u0627\u0644\u0639\u0631\u0636"))}constructor(c,l){this.http=c,this.genericService=l}addProductToOffer(c,l){return this.genericService.addHeaders("Content-Type","application/json"),this.http.post(`${a.c.apiUrl}/offers/${c}`,l,this.genericService.getHeaders()).pipe((0,p.L)(2),(0,u.W)(this.handlingAddProductToOfferErrors))}deleteProductFromOffer(c,l){return this.http.delete(`${a.c.apiUrl}/offers/${c}/products/${l}`).pipe((0,p.L)(2),(0,u.W)(this.genericService.handlingErrors))}updateProductOffer(c,l,O){return this.http.put(`${a.c.apiUrl}/offers/${c}/${l}`,O).pipe((0,p.L)(2),(0,u.W)(this.genericService.handlingErrors))}updateOffer(c){return this.genericService.addHeaders("Content-Type","multipart/form-data"),this.http.put(`${a.c.apiUrl}/Offers?offerId=${c.get("offerId")}`,c,this.genericService.getHeaders()).pipe((0,p.L)(2),(0,u.W)(this.genericService.handlingErrors))}deleteOffer(c){return this.http.delete(`${a.c.apiUrl}/offers/${c}`).pipe((0,p.L)(2),(0,u.W)(this.genericService.handlingErrors))}getProductOffers(c){return this.http.get(`${a.c.apiUrl}/Offers/byProductId/${c}`).pipe((0,p.L)(2),(0,u.W)(this.genericService.handlingErrors))}static#t=this.\u0275fac=function(l){return new(l||t)(g.KVO(f.Qq),g.KVO(m.X))};static#n=this.\u0275prov=g.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);