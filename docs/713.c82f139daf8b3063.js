"use strict";(self.webpackChunkElkoryEcommerce=self.webpackChunkElkoryEcommerce||[]).push([[713],{9713:(ae,m,s)=>{s.r(m),s.d(m,{routes:()=>oe});var l=s(4460),r=s(936),g=s(3124),d=s(7196),e=s(8891),h=s(345),F=s(7859),c=s(1445),_=s(7650),v=s(6978);function O(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628"),e.k0s())}function A(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u0631\u0636 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 3 \u062d\u0631\u0648\u0641"),e.k0s())}function C(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u0631\u0636 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u0632\u064a\u062f \u0639\u0646 100 \u062d\u0631\u0648\u0641"),e.k0s())}function E(n,i){if(1&n&&(e.j41(0,"div",43),e.DNE(1,O,2,0,"span",44)(2,A,2,0,"span",44)(3,C,2,0,"span",44),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.title||null==t.title.errors?null:t.title.errors.required),e.R7$(),e.Y8G("ngIf",null==t.title||null==t.title.errors?null:t.title.errors.minlength),e.R7$(),e.Y8G("ngIf",null==t.title||null==t.title.errors?null:t.title.errors.maxlength)}}function D(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0627\u0644\u0633\u0646\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"),e.k0s())}function x(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0627\u0644\u0633\u0646\u0629 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 2024"),e.k0s())}function y(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0627\u0644\u0633\u0646\u0629 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u0632\u064a\u062f \u0639\u0646 2100"),e.k0s())}function j(n,i){if(1&n&&(e.j41(0,"div",43),e.DNE(1,D,2,0,"span",44)(2,x,2,0,"span",44)(3,y,2,0,"span",44),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.year||null==t.year.errors?null:t.year.errors.required),e.R7$(),e.Y8G("ngIf",null==t.year||null==t.year.errors?null:t.year.errors.min),e.R7$(),e.Y8G("ngIf",null==t.year||null==t.year.errors?null:t.year.errors.max)}}function T(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0627\u0644\u064a\u0648\u0645 \u0645\u0637\u0644\u0648\u0628"),e.k0s())}function N(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0627\u0644\u064a\u0648\u0645 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 1"),e.k0s())}function I(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0627\u0644\u064a\u0648\u0645 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u0632\u064a\u062f \u0639\u0646 31"),e.k0s())}function w(n,i){if(1&n&&(e.j41(0,"div",43),e.DNE(1,T,2,0,"span",44)(2,N,2,0,"span",44)(3,I,2,0,"span",44),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.day||null==t.day.errors?null:t.day.errors.required),e.R7$(),e.Y8G("ngIf",null==t.day||null==t.day.errors?null:t.day.errors.min),e.R7$(),e.Y8G("ngIf",null==t.day||null==t.day.errors?null:t.day.errors.max)}}function G(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0648\u0635\u0641 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628"),e.k0s())}function R(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0648\u0635\u0641 \u0627\u0644\u0639\u0631\u0636 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 3 \u062d\u0631\u0648\u0641"),e.k0s())}function $(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0648\u0635\u0641 \u0627\u0644\u0639\u0631\u0636 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u0632\u064a\u062f \u0639\u0646 500 \u062d\u0631\u0648\u0641"),e.k0s())}function Y(n,i){if(1&n&&(e.j41(0,"div",43),e.DNE(1,G,2,0,"span",44)(2,R,2,0,"span",44)(3,$,2,0,"span",44),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.description||null==t.description.errors?null:t.description.errors.required),e.R7$(),e.Y8G("ngIf",null==t.description||null==t.description.errors?null:t.description.errors.minlength),e.R7$(),e.Y8G("ngIf",null==t.description||null==t.description.errors?null:t.description.errors.maxlength)}}function S(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0645\u062f\u0629 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628"),e.k0s())}function M(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0645\u062f\u0629 \u0627\u0644\u0639\u0631\u0636 \u064a\u062c\u0628 \u0627\u0644\u0627 \u062a\u0642\u0644 \u0639\u0646 1"),e.k0s())}function X(n,i){if(1&n&&(e.j41(0,"div",43),e.DNE(1,S,2,0,"span",44)(2,M,2,0,"span",44),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.duration||null==t.duration.errors?null:t.duration.errors.required),e.R7$(),e.Y8G("ngIf",null==t.duration||null==t.duration.errors?null:t.duration.errors.min)}}function P(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628"),e.k0s())}function B(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0639\u0631\u0636 \u064a\u062c\u0628 \u0627\u0644\u0627 \u062a\u0642\u0644 \u0639\u0646 0"),e.k0s())}function U(n,i){if(1&n&&(e.j41(0,"div",43),e.DNE(1,P,2,0,"span",44)(2,B,2,0,"span",44),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.packageDiscount||null==t.packageDiscount.errors?null:t.packageDiscount.errors.required),e.R7$(),e.Y8G("ngIf",null==t.packageDiscount||null==t.packageDiscount.errors?null:t.packageDiscount.errors.min)}}function L(n,i){if(1&n&&e.nrm(0,"img",41),2&n){const t=e.XpG();e.FS9("src",t.selectedImage,e.B4B)}}function z(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628\u0629"),e.k0s())}function V(n,i){if(1&n&&(e.j41(0,"div",43),e.DNE(1,z,2,0,"span",44),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.image||null==t.image.errors?null:t.image.errors.required)}}let k=(()=>{class n{constructor(t,o,u,a,f,re,ie){this.fb=t,this.genericService=o,this.snackBar=u,this.router=a,this.activatedRoute=f,this.offerService=re,this.fileService=ie,this.notificationDurationInSeconds=5,this.subscriptions=[],this.offerToEdit=null,this.selectedImage="",this.addOfferObserver={next:p=>{this.offerToEdit?(this.snackBar.openFromComponent(g.s,{data:"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0631\u0636 \u0628\u0646\u062c\u0627\u062d",duration:1e3*this.notificationDurationInSeconds}),this.loadOfferToEdit()):this.snackBar.openFromComponent(g.s,{data:"\u062a\u0645 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0631\u0636 \u0628\u0646\u062c\u0627\u062d",duration:1e3*this.notificationDurationInSeconds}),this.router.navigate(["/admin-offers/offer-details",p])},error:p=>{this.offerToEdit?(console.log(p),this.snackBar.openFromComponent(d.A,{data:"\u062a\u0639\u0630\u0631 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0631\u0636",duration:1e3*this.notificationDurationInSeconds})):this.snackBar.openFromComponent(d.A,{data:"\u062a\u0639\u0630\u0631 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0631\u0636",duration:1e3*this.notificationDurationInSeconds})}},this.addOfferForm=this.fb.group({title:[this.offerToEdit?.title??"",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(100)]],description:[this.offerToEdit?.description??"",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(500)]],offerDate:this.fb.group({year:[this.offerToEdit?.offerDate?.getFullYear()??"",[r.k0.required,r.k0.min(2024),r.k0.max(2100)]],month:[this.offerToEdit?.offerDate?.getMonth()??"",[r.k0.required,r.k0.min(1),r.k0.max(12)]],day:[this.offerToEdit?.offerDate?.getDay()??"",[r.k0.required,r.k0.min(1),r.k0.max(31)]]}),duration:[this.offerToEdit?.duration??"",[r.k0.required,r.k0.min(1)]],packageDiscount:[this.offerToEdit?.packageDiscount??"",[r.k0.required,r.k0.min(0)]],image:[this.offerToEdit?.image??"",[r.k0.required]]})}ngOnInit(){this.loadOfferToEdit()}loadOfferToEdit(){this.activatedRoute.paramMap.subscribe(t=>{let o=t.get("id");o&&this.genericService.getById("Offers",Number(o)).subscribe({next:u=>{this.offerToEdit=u,this.populateFormData(u)},error:u=>{this.snackBar.openFromComponent(d.A,{data:"\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0639\u0631\u0636",duration:1e3*this.notificationDurationInSeconds})}})})}populateFormData(t){if(this.selectedImage=this.offerToEdit?.image??"",this.addOfferForm.patchValue(t),t.image){let u=t.image.split("/").pop();this.fileService.urlToFile(t.image,u,"image/png").then(a=>{this.addOfferForm.get("image")?.setValue(a)})}let o=new Date(t.offerDate);this.addOfferForm.patchValue({offerDate:{year:o?.getFullYear(),month:o?.getMonth()+1,day:o?.getDate()}})}onFileSelected(t){const o=t.target;if(o.files&&o.files.length>0){const u=t.target.files[0];if(u.type.startsWith("image/")){this.addOfferForm.get("image")?.setValue(u);const a=new FileReader;a.readAsDataURL(u),a.onload=f=>{this.selectedImage=f.target.result}}else o.value="",this.selectedImage=""}}addOffer(){if(this.addOfferForm.valid){let t=new FormData,o=this.addOfferForm.value;t.append("title",o.title),t.append("description",o.description),t.append("offerDate",o.offerDate.year+"-"+o.offerDate.month+"-"+o.offerDate.day),t.append("duration",o.duration),t.append("packageDiscount",o.packageDiscount),t.append("image",o.image),this.offerToEdit?(t.append("offerId",this.offerToEdit.offerId.toString()),this.subscriptions.push(this.offerService.updateOffer(t).subscribe(this.addOfferObserver))):this.subscriptions.push(this.genericService.insert("Offers",t).subscribe(this.addOfferObserver))}}get title(){return this.addOfferForm.get("title")}get description(){return this.addOfferForm.get("description")}get offerDate(){return this.addOfferForm.get("offerDate")}get duration(){return this.addOfferForm.get("duration")}get packageDiscount(){return this.addOfferForm.get("packageDiscount")}get year(){return this.addOfferForm.get("offerDate.year")}get month(){return this.addOfferForm.get("offerDate.month")}get day(){return this.addOfferForm.get("offerDate.day")}get image(){return this.addOfferForm.get("image")}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(r.ok),e.rXU(h.X),e.rXU(F.UG),e.rXU(c.Ix),e.rXU(c.nX),e.rXU(_.Y),e.rXU(v.E))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-new-offer"]],standalone:!0,features:[e.aNF],decls:79,vars:12,consts:[[1,"get-in-touch"],[1,"title"],[1,"contact-form","row",3,"ngSubmit","formGroup"],[1,"form-field","col-lg-6"],["for","title",1,"label"],["type","text","id","title","formControlName","title",1,"input-text","js-input"],["class","text-danger",4,"ngIf"],[1,"form-field","col-lg-12"],["for","offerDate"],["formGroupName","offerDate",1,"row"],[1,"col-md-4","mb-3"],[1,"form-field"],["for","year",1,"label"],["type","number","formControlName","year","id","year","min","2024","max","2100","placeholder","YYYY",1,"input-text","js-input"],["for","month",1,"label"],["formControlName","month","id","month",1,"input-text","js-input",2,"height","48px","padding","0 10px"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],[1,"col-md-4"],["for","day",1,"label"],["type","number","formControlName","day","id","day","min","1","max","31","placeholder","dd",1,"input-text","js-input"],["for","description",1,"label"],["type","text","id","description","formControlName","description",1,"input-text","js-input"],["for","duration",1,"label"],["type","number","id","duration","formControlName","duration",1,"input-text","js-input"],["for","packageDiscount",1,"label"],["type","number","id","packageDiscount","formControlName","packageDiscount",1,"input-text","js-input"],["for","image",1,"label"],[1,"form-group","mb-2","d-flex","justify-content-between","align-items-center","flex-wrap"],["type","file",1,"form-control",3,"change"],["type","hidden","id","image","formControlName","image"],["width","200",1,"img-fluid","rounded-1","my-2","mx-auto",3,"src"],["type","submit",1,"submit-btn",3,"disabled","value"],[1,"text-danger"],[4,"ngIf"]],template:function(o,u){1&o&&(e.j41(0,"section",0)(1,"h1",1),e.EFF(2),e.k0s(),e.j41(3,"form",2),e.bIt("ngSubmit",function(){return u.addOffer()}),e.j41(4,"div",3)(5,"label",4),e.EFF(6,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u0631\u0636"),e.k0s(),e.nrm(7,"input",5),e.DNE(8,E,4,3,"div",6),e.k0s(),e.j41(9,"div",7)(10,"label",8),e.EFF(11,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0639\u0631\u0636"),e.k0s(),e.j41(12,"div",9)(13,"div",10)(14,"div",11)(15,"label",12),e.EFF(16,"\u0627\u0644\u0633\u0646\u0629"),e.k0s(),e.nrm(17,"input",13),e.k0s(),e.DNE(18,j,4,3,"div",6),e.k0s(),e.j41(19,"div",10)(20,"div",11)(21,"label",14),e.EFF(22,"\u0627\u0644\u0634\u0647\u0631"),e.k0s(),e.j41(23,"select",15)(24,"option",16),e.EFF(25,"\u064a\u0646\u0627\u064a\u0631"),e.k0s(),e.j41(26,"option",17),e.EFF(27,"\u0641\u0628\u0631\u0627\u064a\u0631"),e.k0s(),e.j41(28,"option",18),e.EFF(29,"\u0645\u0627\u0631\u0633"),e.k0s(),e.j41(30,"option",19),e.EFF(31,"\u0623\u0628\u0631\u064a\u0644"),e.k0s(),e.j41(32,"option",20),e.EFF(33,"\u0645\u0627\u064a\u0648"),e.k0s(),e.j41(34,"option",21),e.EFF(35,"\u064a\u0648\u0646\u064a\u0648"),e.k0s(),e.j41(36,"option",22),e.EFF(37,"\u064a\u0648\u0644\u064a\u0648"),e.k0s(),e.j41(38,"option",23),e.EFF(39,"\u0623\u063a\u0633\u0637\u0633"),e.k0s(),e.j41(40,"option",24),e.EFF(41,"\u0633\u0628\u062a\u0645\u0628\u0631"),e.k0s(),e.j41(42,"option",25),e.EFF(43,"\u0623\u0643\u062a\u0648\u0628\u0631"),e.k0s(),e.j41(44,"option",26),e.EFF(45,"\u0646\u0648\u0641\u0645\u0628\u0631"),e.k0s(),e.j41(46,"option",27),e.EFF(47,"\u062f\u064a\u0633\u0645\u0628\u0631"),e.k0s()()()(),e.j41(48,"div",28)(49,"div",11)(50,"label",29),e.EFF(51,"\u0627\u0644\u064a\u0648\u0645"),e.k0s(),e.nrm(52,"input",30),e.k0s(),e.DNE(53,w,4,3,"div",6),e.k0s()()(),e.j41(54,"div",7)(55,"label",31),e.EFF(56,"\u0648\u0635\u0641 \u0627\u0644\u0639\u0631\u0636"),e.k0s(),e.nrm(57,"input",32),e.DNE(58,Y,4,3,"div",6),e.k0s(),e.j41(59,"div",3)(60,"label",33),e.EFF(61,"\u0645\u062f\u0629 \u0627\u0644\u0639\u0631\u0636 (\u0628\u0627\u0644\u0623\u064a\u0627\u0645)"),e.k0s(),e.nrm(62,"input",34),e.DNE(63,X,3,2,"div",6),e.k0s(),e.j41(64,"div",3)(65,"label",35),e.EFF(66,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0639\u0631\u0636"),e.k0s(),e.nrm(67,"input",36),e.DNE(68,U,3,2,"div",6),e.k0s(),e.j41(69,"div",7)(70,"label",37),e.EFF(71,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0639\u0631\u0636"),e.k0s(),e.j41(72,"div",38)(73,"input",39),e.bIt("change",function(f){return u.onFileSelected(f)}),e.k0s(),e.nrm(74,"input",40),e.DNE(75,L,1,1,"img",41),e.k0s(),e.DNE(76,V,2,1,"div",6),e.k0s(),e.j41(77,"div",7),e.nrm(78,"input",42),e.k0s()()()),2&o&&(e.R7$(2),e.JRh(u.offerToEdit?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0631\u0636 "+u.offerToEdit.title:"\u0627\u0636\u0627\u0641\u0629 \u0639\u0631\u0636 \u062c\u062f\u064a\u062f"),e.R7$(),e.Y8G("formGroup",u.addOfferForm),e.R7$(5),e.Y8G("ngIf",!(null!=u.title&&u.title.valid)&&(null==u.title?null:u.title.touched)),e.R7$(10),e.Y8G("ngIf",!(null!=u.year&&u.year.valid)&&(null==u.year?null:u.year.touched)),e.R7$(35),e.Y8G("ngIf",!(null!=u.day&&u.day.valid)&&(null==u.day?null:u.day.touched)),e.R7$(5),e.Y8G("ngIf",!(null!=u.description&&u.description.valid)&&(null==u.description?null:u.description.touched)),e.R7$(5),e.Y8G("ngIf",!(null!=u.duration&&u.duration.valid)&&(null==u.duration?null:u.duration.touched)),e.R7$(5),e.Y8G("ngIf",!(null!=u.packageDiscount&&u.packageDiscount.valid)&&(null==u.packageDiscount?null:u.packageDiscount.touched)),e.R7$(7),e.vxM(u.selectedImage?75:-1),e.R7$(),e.Y8G("ngIf",!(null!=u.image&&u.image.valid)&&(null==u.image?null:u.image.touched)),e.R7$(2),e.FS9("value",u.offerToEdit?"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0639\u0631\u0636":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0631\u0636"),e.Y8G("disabled",!u.addOfferForm.valid))},dependencies:[r.X1,r.qT,r.xH,r.y7,r.me,r.Q0,r.wz,r.BC,r.cb,r.VZ,r.zX,r.j4,r.JD,r.$R,l.MD,l.bT],styles:[".get-in-touch[_ngcontent-%COMP%]{max-width:800px;margin:50px auto;position:relative}.get-in-touch[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;letter-spacing:3px;font-size:3.2em;line-height:48px;padding-bottom:48px;color:#5543ca;background:#5543ca;background:linear-gradient(to right,#f4524d,#5543ca)!important;-webkit-background-clip:text!important;-webkit-text-fill-color:transparent!important}.contact-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{display:inline-block;background-color:#000;background-image:linear-gradient(125deg,#a72879,#064497);color:#fff;text-transform:uppercase;letter-spacing:2px;font-size:16px;padding:8px 16px;border:none;cursor:pointer}input[disabled][_ngcontent-%COMP%]{opacity:.2;cursor:not-allowed!important}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f9f9f9;color:#333;line-height:1.6;margin:0;padding:0}section.get-in-touch[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:2rem;background-color:#fff;box-shadow:0 4px 8px #0000001a;border-radius:10px}.title[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;text-align:center;margin-bottom:2rem}.contact-form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;width:100%;max-width:800px;background-color:#f1f1f1;padding:2rem;border-radius:10px}.form-field[_ngcontent-%COMP%]{flex:1 1 45%;position:relative}.form-field.col-lg-12[_ngcontent-%COMP%]{flex:1 1 100%}.input-text[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #ddd;border-radius:5px;background-color:#fff;font-size:1rem;transition:border-color .3s}.input-text[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.label[_ngcontent-%COMP%]{position:absolute;top:-10px;left:15px;background-color:#f1f1f1;padding:0 5px;font-size:.85rem;color:#007bff}.text-danger[_ngcontent-%COMP%]{color:#dc3545;margin-top:.5rem;font-size:.85rem}button.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1rem;border:none;border-radius:5px;transition:background-color .3s}button.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}button.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:1rem;font-size:1.25rem;border:none;border-radius:5px;background-color:#28a745;color:#fff;cursor:pointer;transition:background-color .3s}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#218838}img.image[_ngcontent-%COMP%]{margin-top:.5rem;border-radius:5px;border:2px solid #ddd}@media (max-width: 768px){.form-field[_ngcontent-%COMP%]{flex:1 1 100%}}"]})}return n})();var J=s(9571),q=s(1863),Z=s(7544);const W=(n,i)=>i.offerId,H=()=>["/admin-offers/add-offer"],Q=n=>["/admin-offers/offer-details",n];function K(n,i){1&n&&e.nrm(0,"app-secondary-spinner")}function ee(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",4)(2,"div",5),e.nrm(3,"img",6),e.j41(4,"div",7)(5,"h5",8),e.EFF(6),e.k0s(),e.j41(7,"p",9),e.EFF(8),e.k0s(),e.j41(9,"p",10),e.EFF(10),e.nI1(11,"currency"),e.k0s(),e.j41(12,"a",11),e.EFF(13,"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0639\u0631\u0636"),e.k0s(),e.j41(14,"a",12),e.bIt("click",function(){e.eBV(t);const u=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.confirmOfferDelete(u.offerId,u.title))}),e.EFF(15,"\u062d\u0630\u0641 \u0627\u0644\u0639\u0631\u0636"),e.k0s()()()(),e.bVm()}if(2&n){const t=e.XpG().$implicit;e.R7$(3),e.FS9("src",t.image,e.B4B),e.R7$(3),e.JRh(t.title),e.R7$(2),e.JRh(t.description),e.R7$(2),e.SpI("-",e.i5U(11,5,t.packageDiscount,"\u062c.\u0645"),""),e.R7$(2),e.Y8G("routerLink",e.eq3(8,Q,t.offerId))}}function te(n,i){if(1&n&&e.DNE(0,ee,16,10,"ng-container",3),2&n){const t=i.$implicit,o=e.XpG(2);e.Y8G("ngIf",!o.offerIsExpired(t.offerDate,t.duration))}}function ne(n,i){if(1&n&&(e.j41(0,"div",2),e.Z7z(1,te,1,1,"ng-container",null,W),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Dyx(t.offers)}}let ue=(()=>{class n{constructor(t,o,u){this.genericService=t,this.snackBar=o,this.dialog=u,this.subscriptions=[],this.notificationDurationInSeconds=5,this.isoffersLoading=!1,this.offerObserver={next:a=>{this.isoffersLoading=!1,this.offers=a},error:a=>{this.snackBar.openFromComponent(d.A,{data:"\u062a\u0639\u0630\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0639\u0631\u0648\u0636!",duration:1e3*this.notificationDurationInSeconds}),this.isoffersLoading=!1}}}ngOnInit(){this.getAllOffers()}getAllOffers(){this.isoffersLoading=!0,this.subscriptions.push(this.genericService.getAll("Offers").subscribe(this.offerObserver))}offerIsExpired(t,o){let u=new Date,a=new Date(t);return a.setDate(a.getDate()+o),u>a}confirmOfferDelete(t,o){this.dialog.open(J.r,{data:{offerId:t,offerTitle:o}}).afterClosed().subscribe(a=>{this.getAllOffers()})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(h.X),e.rXU(F.UG),e.rXU(Z.bZ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-show-all-offers"]],standalone:!0,features:[e.aNF],decls:6,vars:3,consts:[[1,"container"],[1,"btn","btn-success","mb-3",3,"routerLink"],[1,"row"],[4,"ngIf"],[1,"col-md-4","col-lg-3","mb-4"],[1,"card"],["alt","offer image",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-text","text-danger"],["routerLinkActive","router-link-active",1,"btn","btn-outline-success","btn-sm","ms-3","mb-2",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm","mb-2",3,"click"]],template:function(o,u){1&o&&(e.j41(0,"div",0)(1,"a",1),e.EFF(2,"\u0627\u0636\u0627\u0641\u0629 \u0639\u0631\u0636 \u062c\u062f\u064a\u062f"),e.k0s(),e.nrm(3,"hr"),e.DNE(4,K,1,0,"app-secondary-spinner")(5,ne,3,0,"div",2),e.k0s()),2&o&&(e.R7$(),e.Y8G("routerLink",e.lJ4(2,H)),e.R7$(3),e.vxM(u.isoffersLoading?4:5))},dependencies:[c.Wk,l.oe,l.MD,l.bT,q.l]})}return n})();var b=s(9671);const oe=[{path:"",redirectTo:"/admin-offers/show-all-offers",pathMatch:"full"},{path:"add-offer",component:k},{path:"edit-offer/:id",component:k},{path:"show-all-offers",component:ue},{path:"offer-details/:id",component:b.u},{path:"offer-details/:id/:role",component:b.u}]}}]);